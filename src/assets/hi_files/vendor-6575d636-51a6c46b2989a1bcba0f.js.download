try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="45a1111d-8e8c-4700-968f-0715c5cf21e3",t._sentryDebugIdIdentifier="sentry-dbid-45a1111d-8e8c-4700-968f-0715c5cf21e3")}catch(t){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"c0ef53c"},(self.webpackChunk_loomhq_web_client=self.webpackChunk_loomhq_web_client||[]).push([[9202],{57165:function(t,e,r){"use strict";r.d(e,{Z:function(){return rV}});var n,i,o,s,a,c,u,l,f,h,d,p,m,y,g,b,v,O=r(4729),w=r(59781),E=r.n(w),I=r(71493);class S{constructor(){(0,O.Z)(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),(0,O.Z)(this,"_handleVisibilityChange",()=>{let t=document[this._hidden];this._isHidden=t,this._callbacks.forEach(e=>e(t))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"u">typeof document&&("u">typeof document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):"u">typeof document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):"u">typeof document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),"u">typeof document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(t,e){if("string"!=typeof t)throw Error("Invalid name, must be string");if("function"!=typeof e)throw Error("Invalid callback, must be function");this._callbacks.set(t,e)}removeCallback(t){this._callbacks.has(t)&&this._callbacks.delete(t)}getIsHidden(){return this._isHidden}}class _{constructor(){this._performance=window.performance}clearMarks(...t){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...t)}mark(...t){this._performance&&this._performance.mark&&this._performance.mark(...t)}getEntriesByName(...t){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...t):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class P{constructor(t,e){if((0,O.Z)(this,"_getEventKey",({task:t,taskId:e})=>e?`${t}.${e}`:t),(0,O.Z)(this,"_getEventTimingByName",t=>{let e=this._performance.getEntriesByName(t);return e[e.length-1]}),(0,O.Z)(this,"_getApdexFields",t=>{let e=this._getApdexTimings(t),r=this._calculateApdex({duration:e.duration,threshold:t.threshold});return A(A({},e),{},{apdex:r})}),(0,O.Z)(this,"_getApdexTimings",t=>{let e=this._getEventKey(t),r=`${e}-start`,n=t.startTime||this._getStartTime(t,r),i=t.stopTime||this._getStopTime();return this._cleanApdexState(e),{startTime:n,stopTime:i,duration:i-n}}),(0,O.Z)(this,"_getStartTime",(t,e)=>{let r;let n=this._performance.getTimeOrigin();if(t.type===I.jM.INITIAL_LOAD)r=n;else{let t=this._getEventTimingByName(e);r=n+t.startTime}return r}),(0,O.Z)(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),(0,O.Z)(this,"_cleanApdexState",t=>{this._performance.clearMarks(`${t}-start`),this._performance.clearMarks(`${t}-stop`),this._startedEvents.delete(t)}),(0,O.Z)(this,"_getVisibilityFields",t=>{let e;if(t.type===I.jM.INITIAL_LOAD)e=!this._wasPreviouslyHidden;else if(t.type===I.jM.TRANSITION){let r=this._getEventKey(t);e=this._isActiveEvents.get(r)}return(t.startTime||t.stopTime)&&(e=!this._pageVisibility.getIsHidden()),{isActiveTab:e}}),(0,O.Z)(this,"_calculateApdex",({duration:t,threshold:e=this._threshold})=>t<=e?1:t<=4*e?.5:0),(0,O.Z)(this,"_validateStartEvent",t=>{if(!t)throw Error('Missing "event" in Apdex start event');if(!t.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof t.task)throw Error('Invalid "task" in Apdex start event');if(t.taskId&&"string"!=typeof t.taskId)throw Error('Invalid "taskId" in Apdex start event')}),(0,O.Z)(this,"_validateStopEvent",t=>{if(!t)throw Error('Missing "event" in Apdex stop event');if(!t.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof t.task)throw Error('Invalid "task" in Apdex stop event');if(t.taskId&&"string"!=typeof t.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!t.type)throw Error('Missing "type" in Apdex stop event');if(t.type&&!(0,I.P9)(I.jM,t.type))throw Error('Invalid "type" in Apdex stop event');if(t.threshold&&"number"!=typeof t.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!t.startTime&&t.type===I.jM.TRANSITION){let e=this._getEventKey(t);if(!this._startedEvents.has(e))throw Error(`Apdex event transition "${e}" was not started`)}if(t.startTime&&!("number"==typeof t.startTime&&t.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(t.stopTime&&"number"!=typeof t.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(t.stopTime<=t.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),(0,O.Z)(this,"_shouldSendEvent",t=>!(!t||"number"!=typeof t.apdex)),(0,O.Z)(this,"_sendEvent",(t,e)=>{this._shouldSendEvent(t)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:A(A({},t.additionalAttributes),{},{task:t.task,taskId:t.taskId,type:t.type,threshold:t.threshold||this._threshold,apdex:t.apdex,startTime:t.startTime,stopTime:t.stopTime,duration:t.duration,isActiveTab:t.isActiveTab})},e)}),!t)throw Error("Missing onEvent callback");if("function"!=typeof t)throw Error("Invalid onEvent, must be function");if(!(e instanceof S))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new _,this._onEvent=t,this._threshold=1e3,this._wasPreviouslyHidden=e.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=e,this._pageVisibility.addCallback("apdexEvent",t=>{this.onVisibilityChange(!t)})}start(t){if(this._validateStartEvent(t),!this._performance.isAvailable())return;let e=this._getEventKey(t),r=`${e}-start`;this._startedEvents.set(e,!0),this._isActiveEvents.set(e,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(t){if(this._validateStartEvent(t),!this._performance.isAvailable())return;let e=`${this._getEventKey(t)}-start`;return this._getEventTimingByName(e)}stop(t,e){if(this._validateStopEvent(t),!this._performance.isAvailable())return;let r=this._getApdexFields(t),n=this._getVisibilityFields(t);this._sendEvent(A(A(A({},t),r),n),e)}onVisibilityChange(t){t||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(t=>this._isActiveEvents.set(t,!1)))}}var j=r(16585);let k=t=>"function"==typeof t;var D=(t,e)=>()=>{if(k(t))try{return t()}catch(t){j.error(`${e} - ${t instanceof Error?t.message:String(t)}`);return}return t};let x=t=>t.embeddedType===I.bi.FIRST_PARTY&&void 0!==t.embeddedFromProduct,R=t=>t.embeddedType===I.bi.THIRD_PARTY&&void 0!==t.embeddedFromTopLevelDomain;function N(t){return!0==(null!==t&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(t)}function C(t){if(!1===N(t))return!1;let e=t.constructor;if("function"!=typeof e)return!1;let r=e.prototype;return!(!1===N(r)||!("isPrototypeOf"in r))}function L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function M(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Z(t){return{tenantIdType:t.tenantIdType,tenantId:t.tenantId}}function U(t){return{userIdType:t.userIdType}}function F(t){return{orgId:t.orgId}}function B(t){return{workspaceId:t.workspaceId}}function q(t){if(H(t))return{aliases:t}}function W(t){if(H(t))return{groups:t}}function $(t){return t.anonymousId?{anonymousId:t.anonymousId}:{}}function G(t,e){return void 0===e?t:e}function V(t,e){let r=e||{},n=G(t.env,r.env),i=G(t.product,r.product),o=G(t.subproduct(),r.subproduct),s=G(t.version,r.version),a=G(t.origin,r.origin),c=G(t.platform,r.platform);return{env:n,product:i,subproduct:o,version:s,origin:a,platform:c}}function H(t){return C(t)&&Object.keys(t).length>0}function K(t,e){return H(e)?{[t]:e}:void 0}function Q(t){if(H(t)){let e=function(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];e[r]={id:n.id,type:n.type}}),e}(t);return K("containers",e)}}function J(t,e){return M({containerType:t.containerType,containerId:t.containerId,source:t.source,objectType:t.objectType,objectId:t.objectId,actionSubject:t.actionSubject,action:t.action,actionSubjectId:t.actionSubjectId,attributes:t.attributes,nonPrivacySafeAttributes:t.nonPrivacySafeAttributes,tags:t.tags,highPriority:t.highPriority,eventType:e},Q(t.containers))}function Y(t){return`${t.actionSubject} ${t.action}`}function z(t,e,r,n,i,o,s,a,c,u,l,f,h){let d=V(t,function(t){let{env:e,product:r,subproduct:n,version:i,origin:o,platform:s}=t;return{env:e,product:r,subproduct:n,version:i,origin:o,platform:s}}(n)),p=Z(e),m=F(c),y=B(l),g=U(r),b=J(n,i);return M(M(M(M(M(M(M(M(M({},d),p),m),g),b),$(n)),{},{tabId:o,sessionId:s,taskSessions:a,pageLoadId:u},y),q(f)),W(h))}let X=1e4,tt=(t,e)=>Object.keys(t).reduce((r,n)=>{let i=e(t[n],n,t);return r[i]=t[n],r},{}),te=(t,e)=>e.reduce((e,r)=>(r in t&&(e[r]=t[r]),e),{}),tr=(t,e)=>Object.keys(t).filter(r=>!e(t[r],r)).reduce((e,r)=>(e[r]=t[r],e),{}),tn=(t,e)=>Object.keys(t).filter(r=>e(t[r],r)).reduce((e,r)=>(e[r]=t[r],e),{}),ti=(t,e)=>Object.keys(t).filter(t=>0>e.indexOf(t)).reduce((e,r)=>(e[r]=t[r],e),{}),to=(t,e)=>{if(t===e)return!0;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return t===e;if(t.prototype!==e.prototype)return!1;let r=Object.keys(t);return r.length===Object.keys(e).length&&r.every(r=>to(t[r],e[r]))},ts=(t,e)=>t.reduce((t,r,n,i)=>(t[e(r,n,i)?0:1].push(r),t),[[],[]]),ta=Object.freeze([I.a7.OPERATIONAL,I.a7.TRACK,I.a7.UI]);function tc(t){if(t){if(t&&t.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(t).forEach(t=>(function(t){if(!C(t))throw Error("properties.containers must be an Object");if(!("id"in t))throw Error("properties.containers is missing field 'id'");if("string"!=typeof t.id)throw Error("properties.containers.id must be of type String");if("type"in t&&"string"!=typeof t.type)throw Error("properties.containers.type must be of type String")})(t))}}function tu(t){switch(t){case I.a7.OPERATIONAL:case I.a7.TRACK:case I.a7.UI:return!0;default:return!1}}function tl(t){if(!t)throw Error("Missing event");if(!t.source)throw Error("Missing event.source");if(!t.actionSubject)throw Error("Missing event.actionSubject");if(!t.action)throw Error("Missing event.action");tc(t.containers)}class tf{constructor(t,e){if((0,O.Z)(this,"canCompress",t=>{try{return t&&tu(t.eventType)&&this.predicate(t)}catch{return!1}}),(0,O.Z)(this,"compress",t=>{let[e,r]=ts(t,t=>this.canCompress(t)),n=this.compressFn(e);if(!n)throw Error("No events were returned from the compression function");return n.forEach(t=>{(function(t){if(!tu(t))throw Error(`Invalid action event type: ${t}, must be one of: [${ta}]`)})(t.eventType),tl(t)}),n.concat(r)}),"function"!=typeof t)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof e)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=t,this.compressFn=e}}var th=r(16585);function td(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function tp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?td(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):td(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class tm{constructor(t=[]){if((0,O.Z)(this,"canCompress",t=>this.compressionRules.some(e=>e.canCompress(t))),(0,O.Z)(this,"compress",t=>this.createGroups(t).reduce((t,e)=>{let r=this.compressGroup(e);return t.concat(r)},[])),(0,O.Z)(this,"createGroups",t=>t.reduce((t,e)=>{let r;let n=this.compressionRules.find(t=>t.canCompress(e));if(n){let t=J(e,e.eventType);r=ti(e,Object.keys(t))}let i=t.find(t=>n===t.compressor&&to(r,t.contextFields));return i?i.events.push(e):t.push({contextFields:r,compressor:n,events:[e]}),t},[])),(0,O.Z)(this,"compressGroup",t=>{if(!t.compressor)return t.events;try{return t.compressor.compress(t.events).map(e=>tp(tp({},e),t.contextFields))}catch(e){return th.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.events.length} uncompressed events instead`),t.events}}),!Array.isArray(t))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!t.every(t=>t instanceof tf))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=t}}var ty=r(16585);class tg{constructor(t,e){(0,O.Z)(this,"push",(t,e,r,n)=>{this.eventArgs.push({identifier:t,builtEvent:e,context:r,userInfo:n})}),(0,O.Z)(this,"size",()=>this.eventArgs.length),(0,O.Z)(this,"startFlush",()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(t){ty.warn(`Failed to perform compression on the delayed analytics events. Error: ${t.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()}),(0,O.Z)(this,"cancelFlush",()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)}),(0,O.Z)(this,"flushNextBatch",()=>{this.eventArgs.splice(0,7).forEach(t=>this.processFn(t.identifier,t.builtEvent,t.context,t.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null}),(0,O.Z)(this,"compressEventArgs",t=>{let[e,r]=ts(t,t=>this.compressor.canCompress(t.builtEvent)),n=e.reduce((t,e)=>{let r=t.find(t=>to(t.userInfo,e.userInfo)&&to(t.context,e.context));return r?r.eventArgs.push(e):t.push({userInfo:e.userInfo,context:e.context,eventArgs:[e]}),t},[]).reduce((t,e)=>{try{let r=e.eventArgs.map(t=>t.builtEvent),n=this.compressor.compress(r).map(t=>({identifier:Y(t),builtEvent:t,userInfo:e.userInfo,context:e.context}));return t.concat(n)}catch(t){return ty.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.eventArgs.length} uncompressed events instead`),e.eventArgs}},[]);return r.forEach(t=>n.push(t)),n}),this.processFn=t,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new tm(e)}}let tb=((n={}).TIMEOUT="timeout",n.MANUAL="manual",n);class tv{constructor(t,e){(0,O.Z)(this,"push",(t,e,r,n)=>{this.delayQueue.push(t,e,r,n)}),(0,O.Z)(this,"startLowPriorityEventDelay",(t=X,e)=>{if(Number.isNaN(t)||t<=0)throw Error(`Invalid timeout period: ${t}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayCallback=e,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(tb.TIMEOUT),t?Math.min(t,3e4):3e4),this.delayQueue.cancelFlush(),this.isDelaying=!0}),(0,O.Z)(this,"stopLowPriorityEventDelay",(t=tb.MANUAL)=>{var e;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(e=this.delayCallback)||void 0===e||e.call(this,t),this.delayCallback=void 0}),(0,O.Z)(this,"isDelayingLowPriorityEvents",()=>this.isDelaying),this.isDelaying=!1,this.delayQueue=new tg(t,e)}}let tO=((i={}).IN_PROGRESS="inProgress",i.QUEUE="queue",i.RECLAIM_START="reclaimStart",i.RECLAIM_END="reclaimEnd",i.ACK="ack",i),tw=((o={})[o.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",o[o.RECLAIM_WAIT=500]="RECLAIM_WAIT",o[o.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",o),tE=(t,e)=>({[tO.ACK]:`${t}.${e}.${tO.ACK}`,[tO.QUEUE]:`${t}.${e}.${tO.QUEUE}`,[tO.IN_PROGRESS]:`${t}.${e}.${tO.IN_PROGRESS}`,[tO.RECLAIM_START]:`${t}.${e}.${tO.RECLAIM_START}`,[tO.RECLAIM_END]:`${t}.${e}.${tO.RECLAIM_END}`}),tI=Object.values(tO);var tS=t=>{if("string"!=typeof t||0===t.length)return 0;try{let e=Object.keys(localStorage).filter(e=>e&&e.startsWith(`${t}.`)||!1).map(t=>t.split(".")).filter(t=>3===t.length&&tI.includes(t[2])).reduce((t,e)=>{let[,r,n]=e;return void 0===t[r]&&(t[r]={}),t[r][n]=!0,t},{}),r=Object.keys(e).filter(t=>!0!==e[t][tO.ACK]);return r.forEach(e=>{let{queue:r,inProgress:n,reclaimStart:i,reclaimEnd:o}=tE(t,e);localStorage.removeItem(n),localStorage.removeItem(r),localStorage.removeItem(i),localStorage.removeItem(o)}),r.length}catch{}return 0};function t_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function tT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t_(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}let tA=t=>new Promise(e=>{setTimeout(e,t)}),tP=t=>{try{return Object.keys(localStorage).filter(e=>e.startsWith(t)).map(t=>t.split(".")).filter(e=>{if(3===e.length&&e[0]===t&&e[2]===tO.ACK)try{let t=localStorage.getItem(e.join("."));if(t){let e=parseInt(t);return tw.RECLAIM_TIMEOUT+e<Date.now()}}catch{}return!1}).map(t=>t[1])}catch{}return[]},tj=async(t,e)=>{let{ack:r,reclaimStart:n,reclaimEnd:i}=t.storageKeys,o=Date.now();if(localStorage.setItem(n,t.reclaimProcessId),localStorage.setItem(r,o.toString()),await tA(tw.RECLAIM_WAIT),Date.now()>o+tw.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(n)!==t.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(i,t.reclaimProcessId),await tA(tw.RECLAIM_WAIT),Date.now()>o+tw.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(n)!==t.reclaimProcessId||localStorage.getItem(i)!==t.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return tk(t,e)},tk=async(t,e)=>{let{queue:r,inProgress:n}=t.storageKeys,i=JSON.parse(localStorage.getItem(r)||"[]"),o=JSON.parse(localStorage.getItem(n)||"{}"),s=Object.entries(o).map(([t,e])=>tT(tT({},e),{},{attemptNumber:e.attemptNumber+1,id:t})),a=[...i,...s];if(a.length>0){let i=await e(a);if("successful"===i.status)tD(t.storageKeys);else if("partial"===i.status){let t=a.filter(t=>!i.acceptedItemIds.includes(t.id));return localStorage.removeItem(n),localStorage.setItem(r,JSON.stringify(t)),{fullReclaim:!1}}}else tD(t.storageKeys);return{fullReclaim:!0}},tD=t=>{localStorage.removeItem(t.queue),localStorage.removeItem(t.inProgress),localStorage.removeItem(t.reclaimEnd),localStorage.removeItem(t.reclaimStart),localStorage.removeItem(t.ack)};var tx=async(t,e)=>{if("string"!=typeof t||0===t.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let r=E()(),n=tP(t).map(n=>tj({queuePrefix:t,reclaimProcessId:r,storageKeys:tE(t,n)},e)),i=await Promise.allSettled(n),o=i.filter(t=>"rejected"===t.status),s=i.filter(t=>"fulfilled"===t.status).map(t=>t.value),a=s.filter(t=>t.fullReclaim),c=s.filter(t=>!t.fullReclaim);return{failedReclaims:o.length,partialReclaims:c.length,fullReclaims:a.length}};let tR="namespace-timeAdded",tN="analytics-resilience",tC="timeToBeProcessedAfter",tL="timeAdded",tM="retryAttempts",tZ=((s={}).INDEXEDDB="indexeddb",s.MEMORY="memory",s),tU=((a={}).IGNORE="ignore",a.ABANDON="abandon",a.EVICT="evict",a);class tF extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,tF.prototype),this.name="NoIndexedDbError"}}let tB="AbandonWriteError";class tq extends Error{constructor(t){super(`Event Limit reached. Abandoning write to: ${t}`),Object.setPrototypeOf(this,tq.prototype),this.name=tB}}let tW="CallbackProcessingError";class t$ extends Error{constructor(t){let e=t&&"object"==typeof t&&"toString"in t&&"function"==typeof t.toString&&t.toString()||"string"==typeof t&&t||"Argument passed to CallbackProcessingError was not an Error or string.";super(`Error thrown while processing events in callback: ${e}`),Object.setPrototypeOf(this,t$.prototype),this.name=tW}}let tG="InvalidPolicyError";class tV extends Error{constructor(t,e){super(`Method '${e}' cannot be called with policy '${t}'.`),this.name=tG}}let tH=t=>!!t&&"object"==typeof t&&"name"in t&&"string"==typeof t.name&&(t.name===tB||t.name===tW||t.name===tG);var tK=r(98328);function tQ(t,e){if(null==t)return{};var r,n,i=(0,tK.Z)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||({}).propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}let tJ=7;var tY=r(16585);let tz=(t,e,{id:r,retryAttempts:n,timeToProcessOffset:i})=>({item:t,id:r||E()(),retryAttempts:n||0,timeToBeProcessedAfter:Date.now()+(i||0),namespace:e,timeAdded:Date.now()}),tX=t=>({logger:t.logger||tY,useMemory:t.useMemory||!1,maxAttempts:t.maxAttempts||10,maxEventLimit:t.maxEventLimit||5e3}),t0=t=>new Promise((e,r)=>{t.onsuccess=t=>{e(t)},t.onerror=t=>{r(t)}}),t1=t=>new Promise((e,r)=>{t.oncomplete=()=>{e()},t.onerror=t=>{r(t)},t.onabort=t=>{r(t)}}),t2=(t,e)=>{try{"function"==typeof t.commit&&t.commit()}catch(t){throw e.error("Failed to force commit transaction:",t),t}return t1(t)},t3=(t,e)=>{t.onerror=t=>{e.warn("Error thrown from request:",t)}};class t5{constructor(t,e,r,n){if((0,O.Z)(this,"deleteOldestNEvents",async(t,e)=>{var r;let n=t.index(tR),i=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),o=n.getAllKeys(i,e),s=await t0(o),a=null==s||null===(r=s.target)||void 0===r?void 0:r.result;if(a&&Array.isArray(a)&&a.length>0)try{let e=a.map(e=>this.deleteItemHandler(t,e));await Promise.all(e)}catch(t){throw this.logger.warn("Failed to delete items from indexeddb.",t),t}}),t>0)this.eventLimit=t;else throw Error("Event Limit has to be set higher than 1");this.namespace=e,this.logger=r,this.deleteItemHandler=n}async insertItems(t,e,r=tU.ABANDON){let n=[...e],i=0;switch(r){case tU.ABANDON:await this.throwIfNotEnoughSpace(t,e.length);break;case tU.EVICT:i=await this.evictIfNotEnoughSpace(t,e.length);break;case tU.IGNORE:await this.calculateHowManyEventsWeCanAdd(t,n)}let o=n.map(e=>t0(t.add(e)));return await Promise.all(o),await t2(t.transaction,this.logger),{items:n,numberOfEvictedItems:i}}async throwIfNotEnoughSpace(t,e){let r=await this.calculateFreeSpace(t);if(r<e)throw new tq(`Not enough space in IndexedDb. Needed ${e} but only had ${r}`)}async evictIfNotEnoughSpace(t,e){let r=await this.calculateFreeSpace(t);if(r<e){let n=e-r;return await this.deleteOldestNEvents(t,n),n}return 0}async calculateHowManyEventsWeCanAdd(t,e){let r=await this.calculateFreeSpace(t);if(r<e.length){let t=e.length-r,n=e.length-t;e.splice(n,t)}}async calculateFreeSpace(t){let e=await this.getCountofEventsInObjectStore(t);return this.eventLimit-e}async getCountofEventsInObjectStore(t){let e=t.index(tR),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),n=e.count(r);return(await t0(n)).target.result}}let t6=["item"],t4=["items"];function t9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}class t8{constructor(t,e={}){if((0,O.Z)(this,"startDB",async()=>new Promise(async(t,e)=>{if("u">typeof window){let r=window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),e(new tF)},15e3),n=window.indexedDB.open("analytics-web-client",1);n.onupgradeneeded=t=>{if(0!==t.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let e=n.result.createObjectStore(tN,{keyPath:"id"});e.createIndex(tC,tC,{unique:!1}),e.createIndex(tM,tM,{unique:!1}),e.createIndex(tL,tL,{unique:!1}),e.createIndex(tR,["namespace","timeAdded"],{unique:!1})},n.onerror=function(){e(new tF)};try{return await t0(n),t(n.result)}catch(t){this.logger.warn("IndexedDB failed to initialise.",t),e(new tF)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),e(new tF)})),(0,O.Z)(this,"addItem",async(t,e={},r=tU.ABANDON)=>{let{logger:n,namespace:i}=this,o=tz(t,i,e),{objectStore:s}=await this.getObjectStoreAndTransaction("readwrite");if(r===tU.IGNORE)throw new tV(r,"IndexedDbConnector#addItem");try{if(!o.namespace||0===o.namespace.length||"string"!=typeof o.namespace)throw Error("Namespace not specified");let t=await this.globalEventLimitGuard.insertItems(s,[o],r);if(1===t.items.length)return{item:t.items[0],numberOfEvictedItems:t.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${t.items.length}`)}catch(t){throw tH(t)?t:(n.log("Failed to add item to table",t),Error("Request to add item to table failed"))}}),(0,O.Z)(this,"bulkAddItem",async(t,e=tU.ABANDON)=>{let{logger:r,namespace:n}=this,i=t.map(t=>{let{item:e}=t;return tz(e,n,tQ(t,t6))}),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(o,i,e)}catch(t){throw tH(t)?t:(r.log("Failed to add item to table",t),Error("Request to add item to table failed"))}}),(0,O.Z)(this,"getItems",async(t=tJ)=>{let e=t>0?t:tJ,{logger:r}=this,n=this.options.maxAttempts,{transaction:i,objectStore:o}=await this.getObjectStoreAndTransaction("readwrite"),s=o.index(tC),a=IDBKeyRange.upperBound(Date.now()),c=s.openCursor(a),u=await new Promise(async(t,i)=>{let o=[],s=0;c.onerror=t=>{r.error("Failed to open cursor:",t),i("Failed to open cursor")},c.onsuccess=i=>{let a=i.target.result;if(a){let i=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t9(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t9(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},a.value);o.push(i);let c=a.value;if(c.retryAttempts+=1,c.timeToBeProcessedAfter=Date.now()+6e4,c.retryAttempts>=n){++s;let t=a.delete();t3(t,r)}else{let t=a.update(c);t3(t,r)}o.length<e?a.continue():t({items:o,numberOfDeletedItems:s})}else t({items:o,numberOfDeletedItems:s})}});return await t2(i,this.logger),u}),(0,O.Z)(this,"deleteItems",async t=>{let{transaction:e,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let n=t.map(t=>this.deleteItem(r,t));await t2(e,this.logger),await Promise.all(n)}catch(t){throw this.logger.warn("Failed to delete items from indexeddb.",t),t}}),(0,O.Z)(this,"getItemCount",async()=>{let{transaction:t,objectStore:e}=await this.getObjectStoreAndTransaction("readonly"),r=e.index(tC),n=IDBKeyRange.upperBound(Date.now()),i=r.count(n),o=await t0(i);return await t2(t,this.logger),o.target.result}),(0,O.Z)(this,"processItems",async(t,e=tJ)=>{let r=await this.getItems(e),{items:n}=r,i=tQ(r,t4);try{let e=await t(n,i),r=n.map(t=>t.id);return await this.deleteItems(r),e}catch(t){throw new t$(t)}}),(0,O.Z)(this,"deleteItem",async(t,e)=>{let{logger:r}=this;try{await t0(t.delete(e))}catch(t){throw r.error("Failed to delete item:",e,t),t}}),(0,O.Z)(this,"getObjectStoreAndTransaction",async t=>{let e=(await this.db).transaction(tN,t),r=e.objectStore(tN);return{transaction:e,objectStore:r}}),this.options=tX(e),this.namespace=t,this.logger=this.options.logger,!window.indexedDB)throw new tF;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new t5(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return tZ.INDEXEDDB}}class t7{constructor(t,e){if((0,O.Z)(this,"insertItemsToMemoryStore",(t,e)=>{switch(e){case tU.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(t);case tU.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(t));case tU.IGNORE:return this.handleAddAsManyAsPossible(t)}}),t>0)this.eventLimit=t;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=e}async handleAbandonIfLimitWillExceedPolicy(t){if(await this.memoryItemHandlers.getItemCount()+t.length>this.eventLimit)throw new tq(tZ.MEMORY);return this.memoryItemHandlers.addItems(t),{items:t,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(t){this.memoryItemHandlers.addItems(t);let e=this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit);return{items:t,numberOfEvictedItems:e}}async handleAddAsManyAsPossible(t){let e=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=e>t.length?t:t.slice(0,e);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}let et=["item"],ee=["items"];function er(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}class en{constructor(t,e={}){this.namespace=t,this.memoryStore=[],this.options=tX(e),this.globalEventLimitGuard=new t7(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(t,e={},r=tU.ABANDON){if(r===tU.IGNORE)throw new tV(r,"IndexedDbConnector#addItem");let n=tz(t,this.namespace,e),i=await this.globalEventLimitGuard.insertItemsToMemoryStore([n],r);return Promise.resolve({item:i.items[0],numberOfEvictedItems:i.numberOfEvictedItems})}bulkAddItem(t,e=tU.ABANDON){let r=t.map(t=>{let{item:e}=t,r=tQ(t,et);return tz(e,this.namespace,r)});return this.bulkAddItemWrapperType(r,e)}bulkAddItemWrapperType(t,e=tU.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(t,e))}getItems(t=tJ){return Promise.resolve(this.synchronousGetItems(t))}synchronousGetItems(t=tJ){let e=t>0?t:tJ,r=Date.now(),n=[],i=[];for(let t of this.memoryStore)if(t.timeToBeProcessedAfter<=r&&(n.push(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t)),t.timeToBeProcessedAfter+=6e4,t.retryAttempts+=1,t.retryAttempts>=this.options.maxAttempts&&i.push(t)),n.length>=e)break;return i.forEach(t=>{let e=this.memoryStore.indexOf(t);this.memoryStore.splice(e,1)}),{items:n,numberOfDeletedItems:i.length}}deleteItems(t){return this.memoryStore=this.memoryStore.filter(e=>!t.includes(e.id)),Promise.resolve(void 0)}getItemCount(){let t=Date.now(),e=this.memoryStore.filter(e=>e.timeToBeProcessedAfter<=t).length;return Promise.resolve(e)}async processItems(t,e){let r=this.synchronousGetItems(e),{items:n}=r,i=tQ(r,ee),o=n.map(t=>t.id);try{let e=await t(n,i);return await this.deleteItems(o),e}catch(t){throw new t$(t)}}storeType(){return tZ.MEMORY}addItems(t){this.memoryStore.push(...t),this.memoryStore.sort(function(t,e){return t.timeAdded-e.timeAdded})}evictEventsIfNeeded(t){let e=this.memoryStore.length;if(e>t){let r=e-t;return this.memoryStore.splice(0,r),r}return 0}}var ei=class{constructor(t,e={}){if(this.namespace=t,this.options=tX(e),!t||0===t.length||"string"!=typeof t)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(t,e)}getResilienceMechanism(t,e){if(!e.useMemory)try{return new t8(t,e)}catch(t){if(!(t instanceof tF)){var r;null===(r=e.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}}return new en(this.namespace,e)}addItem(t,e,r=tU.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(t,e,r))}bulkAddItem(t,e=tU.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(t,e))}getItems(t){return this.runOrFailOver(()=>this.resilience.getItems(t))}deleteItems(t){return this.runOrFailOver(()=>this.resilience.deleteItems(t))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(t,e){return this.runOrFailOver(()=>this.resilience.processItems(t,e))}storeType(){return this.resilience.storeType()}async runOrFailOver(t){try{return await t()}catch(e){if(tH(e))throw e;return this.resilience.storeType()===tZ.INDEXEDDB&&await this.failOver(),t()}}async failOver(){let t=this.resilience,e=new en(this.namespace,this.options);this.resilience=e;try{let{items:r}=await t.getItems(this.options.maxEventLimit);if(r.length>0){let n=(await e.bulkAddItemWrapperType(r,tU.IGNORE)).items.map(t=>t.id);await t.deleteItems(n)}}catch{this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}};let eo=((c={}).INDEXEDDB="indexeddb",c.MEMORY="memory",c),es=((u={})[u.ONLINE=0]="ONLINE",u[u.OFFLINE=1]="OFFLINE",u);class ea{constructor(){(0,O.Z)(this,"itemsDiscardedByRetry",0),(0,O.Z)(this,"eventCount",0),(0,O.Z)(this,"itemsDiscardedByOverflow",0),(0,O.Z)(this,"resilienceMechanism",eo.INDEXEDDB),(0,O.Z)(this,"localstorageNumberOfQueuesPurged",0),(0,O.Z)(this,"localstorageNumberOfFullReclaims",0),(0,O.Z)(this,"localstorageNumberOfPartialReclaims",0),(0,O.Z)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(t=1){this.itemsDiscardedByRetry+=t}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(t=1){this.itemsDiscardedByOverflow+=t}setResilienceMechanism(t){this.resilienceMechanism=t}addToReclaimMetrics(t){this.localstorageNumberOfFullReclaims+=t.fullReclaims,this.localstorageNumberOfPartialReclaims+=t.partialReclaims,this.localstorageNumberOfFailedReclaims+=t.failedReclaims}addToPurgedQueuesMetrics(t){this.localstorageNumberOfQueuesPurged+=t}subtractFromMetrics(t){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,t.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,t.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,t.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,t.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,t.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,t.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,t.localstorageQueuesPurged)}subtractFromCount(t,e){return Math.max(t-(e||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let ec=null;var eu=()=>(ec||(ec=new ea),ec);class el{constructor(t){"u">typeof window&&(window.addEventListener("offline",()=>t(es.OFFLINE)),window.addEventListener("online",()=>t(es.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?es.ONLINE:es.OFFLINE}}let ef=((l={}).IDLE="idle",l.RUNNING="running",l.COMPLETED="completed",l.TIMED_OUT="timedOut",l),eh=((f={}).EXECUTE="execute",f.COMPLETE="complete",f.TIMEOUT="timeout",f);class ed{constructor(t){if((0,O.Z)(this,"timeoutHandle",void 0),(0,O.Z)(this,"callbackStatus",ef.IDLE),t>0){this.timeoutPeriod=t;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(t,e){switch(t){case ef.IDLE:case ef.TIMED_OUT:case ef.COMPLETED:e===eh.EXECUTE&&(this.callbackStatus=ef.RUNNING);break;case ef.RUNNING:switch(e){case eh.COMPLETE:this.callbackStatus=ef.COMPLETED;break;case eh.TIMEOUT:this.callbackStatus=ef.TIMED_OUT}break;default:this.callbackStatus=t}}executeCallbackWithTimeout(t,e,r){typeof window>"u"||(this.transitionCallbackStatus(this.callbackStatus,eh.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,eh.TIMEOUT),r()},this.timeoutPeriod),t(t=>{this.cancelTimeout(),this.getCallbackStatus()!==ef.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,eh.COMPLETE),e(t))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"u">typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let ep=((h={})[h.NOOP=0]="NOOP",h[h.SUCCESS=1]="SUCCESS",h[h.ERROR=2]="ERROR",h),em={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3},ey=((d={})[d.NONE=0]="NONE",d[d.IMMEDIATE=1]="IMMEDIATE",d[d.WAIT=2]="WAIT",d);class eg{constructor(t,e){(0,O.Z)(this,"schedule",({immediate:t}={immediate:!1})=>{typeof window>"u"||(this.operationInFlight?t?this.queuedSchedule=ey.IMMEDIATE:this.queuedSchedule!==ey.IMMEDIATE&&(this.queuedSchedule=ey.WAIT):(t||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))}),(0,O.Z)(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=ey.NONE}),(0,O.Z)(this,"getFailureCount",()=>this.failureCount),(0,O.Z)(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),(0,O.Z)(this,"clearTimeout",()=>{"u">typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),(0,O.Z)(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(ep.ERROR))}catch(t){this.done(t)}}),(0,O.Z)(this,"done",t=>{this.operationInFlight=!1,t===ep.ERROR||this.callbackTimer.getCallbackStatus()===ef.TIMED_OUT?(this.failureCount++,this.clearTimeout()):t===ep.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),(0,O.Z)(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==ey.NONE){let t=this.queuedSchedule===ey.IMMEDIATE;this.queuedSchedule=ey.NONE,this.schedule({immediate:t})}else this.failureCount>0&&this.schedule()}),(0,O.Z)(this,"calculateBackoff",()=>{let{minRetryDelay:t,maxRetryDelay:e,backoffFactor:r,backoffJitterPercentage:n}=this.options,i=t*r**this.failureCount;if(n){let t=Math.random(),e=Math.floor(t*n*i);5>Math.floor(10*t)?i-=e:i+=e}return Number(Math.min(i,e).toPrecision(1))}),this.options={minRetryDelay:t.minRetryDelay||em.minRetryDelay,maxRetryDelay:t.maxRetryDelay||em.maxRetryDelay,backoffFactor:t.backoffFactor||em.backoffFactor,backoffJitterPercentage:t.backoffJitterPercentage||em.backoffJitterPercentage,waitInterval:void 0!==t.waitInterval?t.waitInterval:em.waitInterval,callbackTimeoutPeriod:t.callbackTimeoutPeriod||em.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=e,this.operationInFlight=!1,this.queuedSchedule=ey.NONE,this.callbackTimer=new ed(this.options.callbackTimeoutPeriod)}}function eb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ev(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eb(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}let eO={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},ew={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class eE{constructor(t,e,r,n){this.queuePrefix=t,this.resilience=new ei(e,{logger:n,maxAttempts:r?.maxAttempts,maxEventLimit:r?.maxItems}),this.options=this.buildOptions(r),this.scheduler=new eg(ev(ev({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new eg(ev(ev({},eO),{},{waitInterval:eO.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=eu(),this.networkStatus=new el(t=>{t===es.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(t){this.batchFlushCallback=t,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(t){let e=JSON.parse(JSON.stringify(t)),{numberOfEvictedItems:r}=await this.resilience.addItem(e,{},tU.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(t){if(this.networkStatus.getNetworkStatus()===es.OFFLINE){t(ep.NOOP);return}try{let e=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);t(e)}catch(e){if(e.name===tW){t(ep.ERROR);return}}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let t=await this.resilience.getItemCount();t>0&&this.scheduler.schedule({immediate:t>=this.options.batchFlushSize})}async scheduleLongCallBack(t){let e=tS(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(e);let r=await tx(this.queuePrefix,async t=>{let e=t.map(t=>({item:t.item,retryAttempts:t.attemptNumber,id:t.id})),{items:r}=await this.resilience.bulkAddItem(e,tU.IGNORE);return r.length===e.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(t=>t.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),t(ep.SUCCESS),this.longPollingScheduler.schedule()}flush(t,e){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((n,i)=>{if(t.length<=0){n(ep.NOOP);return}let o=t.map(t=>{let e=t.item;return t.retryAttempts>0&&e.msg&&(e.msg._metadata||(e.msg._metadata={}),e.msg._metadata.failedAttempts=t.retryAttempts),e});r(o,t=>{t?(e.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(e.numberOfDeletedItems),i(t)):n(ep.SUCCESS)})})}buildOptions(t){return{backoffFactor:t?.backoffFactor||ew.backoffFactor,backoffJitterPercentage:t?.backoffJitterPercentage!==void 0?t.backoffJitterPercentage:ew.backoffJitterPercentage,batchFlushSize:t?.batchFlushSize||ew.batchFlushSize,flushBeforeUnload:t?.flushBeforeUnload||ew.flushBeforeUnload,flushWaitMs:t?.flushWaitMs||ew.flushWaitMs,maxItems:t?.maxItems||ew.maxItems,maxAttempts:t?.maxAttempts||ew.maxAttempts,maxRetryDelay:t?.maxRetryDelay||ew.maxRetryDelay,minRetryDelay:t?.minRetryDelay||ew.minRetryDelay}}}var eI=(t,e,r,n)=>new eE(t,e,r||{},n);let eS=((p={}).IDENTIFY="identify",p.PAGE="page",p.TRACK="track",p);function e_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function eT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?e_(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}async function eA(t,e){try{let r=await e;return t.map(t=>(function(t,e){if(!(e&&e instanceof Function))return t;if(t.msg.type===eS.PAGE||t.msg.type===eS.TRACK){let r=e();r&&Array.isArray(r)&&(t.msg.properties=eT(eT({},t.msg.properties),{},{xid:r}))}else if(t.msg.traits&&t.msg.type===eS.IDENTIFY){let r=e();r&&Array.isArray(r)&&(t.msg.traits=eT(eT({},t.msg.traits),{},{xid:r}))}return t})(t,r))}catch{return t}}(m={}).XC="xc",m.UID="uid",(y={}).NEW="NEW",y.CHANGED="CHANGED",y.EXISTING="EXISTING",y.TIMEOUT="TIMEOUT",y.ERROR="ERROR",y.UNAVAILABLE="UNAVAILABLE",y.MALFORMED="MALFORMED",y.UNKNOWN="UNKNOWN";var eP=r(95007);function ej(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}let ek=async t=>{var e;let r=null===(e=eD(t))||void 0===e?void 0:e.signal,n=ex(t.url),i=await fetch(t.url,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ej(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ej(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(t.batch),signal:r},n));if(429===i.status||i.status>=500&&i.status<600)throw Error(`HTTP Error ${i.status} (${i.statusText})`);return i},eD=t=>{if(t.abortController)return t.abortController;if(t.timeout){let e=new AbortController;return setTimeout(()=>{e.abort()},t.timeout),e}},ex=(0,eP.Z)(t=>new URL(t).origin===location.origin?{}:{mode:"cors",credentials:"include"});var eR=r(961),eN=r(61380),eC=r.n(eN);let eL=((g={}).AWC_TLD_TEST="AWC_TLD_TEST",g.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",g.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",g);class eM{constructor(t,e){this.key=t,this.options=e}getAttributes(){return this.options}getKey(){return this.key}}let eZ=()=>{try{return window&&window.location&&"https:"===window.location.protocol}catch{return!1}},eU={[eL.AWC_TLD_TEST]:new eM("__awc_tld_test__",{expires:365,secure:eZ(),path:"/"}),[eL.AWC_ANALYTICS_DEBUG]:new eM("atlassian_analytics_debug",{expires:365,secure:eZ(),path:"/"}),[eL.AJS_ANONYMOUS_ID]:new eM("ajs_anonymous_id",{expires:365,secure:eZ(),path:"/"})};var eF=new class{constructor(){(0,O.Z)(this,"_data",{}),(0,O.Z)(this,"length",0),(0,O.Z)(this,"setItem",(t,e)=>(this._data[t]=e,this.length=Object.keys(this._data).length,e)),(0,O.Z)(this,"getItem",t=>t in this._data?this._data[t]:null),(0,O.Z)(this,"removeItem",t=>(t in this._data&&delete this._data[t],this.length=Object.keys(this._data).length,null)),(0,O.Z)(this,"clear",()=>{this._data={},this.length=0}),(0,O.Z)(this,"key",t=>Object.keys(this._data)[t])}};let eB="awcInMemoryStorageFallback";function eq(t){let e="test_value";if(!t)return!1;try{let r="awc.storage.support";t.setItem(r,e);let n=t.getItem(r);return t.removeItem(r),n===e}catch{return!1}}class eW{constructor(t,e={}){(0,O.Z)(this,"getStore",()=>this._store),(0,O.Z)(this,"getItem",t=>this._store.getItem(this.createKey(t))),(0,O.Z)(this,"removeItem",t=>this._store.removeItem(this.createKey(t))),(0,O.Z)(this,"setItem",(t,e)=>{try{this._store.setItem(this.createKey(t),e)}catch(r){(function(t){let e=!1;if(t.code)switch(t.code){case 22:e=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===t.name&&(e=!0)}else -2147024882===t.number&&(e=!0);return e})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(t),e))}}),(0,O.Z)(this,"swapToInMemory",()=>{let t;if(this._store===eF||typeof window>"u")return;let e=Object.keys(this._store||{});eq(window[eB])?t=window[eB]:(t=eF,window[eB]||(window[eB]=eF)),e.forEach(e=>{if(0===e.indexOf(this.getPrefix())){let r=this._store.getItem(e);r&&t.setItem(e,r)}}),this._store=t}),(0,O.Z)(this,"clear",()=>this._store.clear()),(0,O.Z)(this,"key",t=>this._store.key(t)),(0,O.Z)(this,"getPrefix",()=>this._prefix),(0,O.Z)(this,"createKey",t=>this._prefix?`${this.getPrefix()}.${t}`:t),this.options=e;let r=[];(void 0===e.useStoragePrefix||e.useStoragePrefix)&&r.push("awc"),e.envPrefix&&e.envPrefix!==I.gq.PROD&&r.push(e.envPrefix),this._prefix=r.join("-"),eq(t)?this._store=t:this.swapToInMemory()}}var e$=class extends eW{constructor(t){let e;try{e=window.localStorage||eF}catch{e=eF}super(e,t)}};class eG{constructor(){this.safeStorage=new e$({useStoragePrefix:!1})}set(t,e){return this.safeStorage.setItem(t,e),e}get(t){return this.safeStorage.getItem(t)||void 0}remove(t){this.safeStorage.removeItem(t)}}let eV=(t=!1)=>!t&&!("file:"===location.protocol||"chrome-extension:"===location.protocol),eH=eU.AWC_TLD_TEST.getKey(),eK="tld_test",eQ=(0,eP.Z)(()=>{if(typeof location>"u")return"";let{hostname:t}=location,e=t.split(".");for(let t=1;t<=e.length;t++){let r=`.${e.slice(-1*t).join(".")}`;if(eC().set(eH,eK,{domain:r}),eC().get(eH)===eK)return eC().remove(eH,{domain:r}),r}return t});var eJ=r(16585);function eY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ez(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eY(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eY(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class eX{constructor(t){this.cookieLike=eV(t)?eC():new eG}set(t,e,r){if(!eU[t]){eJ.warn(`Unknown cookie key ${t} provided, not set.`);return}return this.cookieLike.set(eU[t].getKey(),e,ez(ez({},eU[t].getAttributes()),{},{domain:eQ()},r))}get(t){if(!eU[t]){eJ.warn(`Unknown cookie key ${t} provided, not fetched.`);return}return this.cookieLike.get(eU[t].getKey())}remove(t,e){if(!eU[t]){eJ.warn(`Unknown cookie key ${t} provided, not removed.`);return}this.cookieLike.remove(eU[t].getKey(),ez({},e))}}let e0="SAFE",e1="UNSAFE",e2="LOCAL_STORAGE";class e3{constructor(t){this.store=new e$({useStoragePrefix:!1}),this.cookie=new eX(t)}getUserId(){return this.userId||null}setUserId(t){this.userId=t}getAnonymousId(t){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(t)}setAnonymousId(t){let e=JSON.stringify(t);return this.cookie.set(eL.AJS_ANONYMOUS_ID,e),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(eU.AJS_ANONYMOUS_ID.getKey(),e)}getAnonymousIdFromStorage(t){let e=t===e2?this.store.getItem(eU.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(eL.AJS_ANONYMOUS_ID);if(e){let t={type:e1,anonymousId:e};try{let r=JSON.parse(e);return r&&"string"==typeof r?{type:e0,anonymousId:r}:t}catch{return t}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let t=this.getAnonymousIdFromStorage(e2),e=!1;switch((!this.lastAnonymousIdCookieUpdate||(0,eR.Z)(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(e=!0),t.type){case e0:return e&&this.setAnonymousId(t.anonymousId),t.anonymousId;case e1:return t.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let t=this.getAnonymousIdFromStorage("COOKIE");switch(t.type){case e0:case e1:return this.store.setItem(eU.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(t.anonymousId)),t.anonymousId;default:return null}}generateNewAnonymousId(t=E()){let e=t();return this.setAnonymousId(e),e}}var e5=r(42019),e6=r.n(e5);function e4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function e9(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?e4(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}let e8=t=>e9(e9({},t.context),{},{userAgent:navigator.userAgent}),e7=t=>{let e=rt(t);return e6()(e)},rt=t=>{if(null===t||"object"!=typeof t)return t;let e={};return Object.keys(t).forEach(r=>{let n=re(t,r);void 0!==n&&(Array.isArray(n)?e[r]=n.map(t=>rt(t)):"object"==typeof n&&null!==n?e[r]=rt(n):e[r]=n)}),e},re=(t,e)=>t[e];var rr=r(16585);function rn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ri(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class ro{constructor(t){var e;(0,O.Z)(this,"sendEvents",async(t,e)=>{let r=this.resilienceQueue.getGlobalRetryCount(),n=this.metrics.getMetricsPayload(),i=ri(ri({},n),{},{httpRetryCount:r});for(let t in i)0===i[t]&&delete i[t];let o=await this.attachXIDs(t),s=new Date().toISOString(),a={batch:o.map(t=>(t.msg.sentAt=s,t.msg)),sentAt:s,metadata:i};try{let t=await ek({url:this.gasv3BatchUrl,batch:a,timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(n),e(null,t)}catch(t){e(t,null)}}),this.options=ri(ri({},t),{},{requestTimeout:t.requestTimeout||1e4,retryQueueOptions:t.retryQueueOptions||{},logger:t.logger||rr,disableCookiePersistence:t.disableCookiePersistence||!1}),this.user=new e3(null===(e=this.options)||void 0===e?void 0:e.disableCookiePersistence),this.xidPromiseCallback=t.xidPromiseGetter(),this.gasv3BatchUrl=`${t.apiHostProtocol}://${t.apiHost}/batch`,this.metrics=eu(),this.resilienceQueue=eI(t.retryQueuePrefix,t.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(t,e,r,n){let i=this.buildBaseEvent(r,eS.TRACK,e),o=ri(ri({},i),{},{type:eS.TRACK,properties:e7(e),event:t}),s=ri(ri({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(s);await this.resilienceQueue.addItem(a),n&&n()}async page(t,e,r,n){let i=this.buildBaseEvent(r,eS.PAGE,e),o=ri(ri({},i),{},{type:eS.PAGE,properties:e7(e),name:t}),s=ri(ri({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(s);await this.resilienceQueue.addItem(a),n&&n()}async identify(t,e,r,n){let i=this.buildBaseEvent(r,eS.IDENTIFY,e),o=ri(ri({},i),{},{type:eS.IDENTIFY,traits:e7(e)}),s=ri(ri({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(s);await this.resilienceQueue.addItem(a),n&&n()}buildBaseEvent(t,e,r){let n=e7(t);return{context:e8(n),timestamp:new Date().toISOString(),type:e,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${E()()}`}packageEvent(t){let{apiHost:e,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:t,url:`${r}://${e}/${t.type.charAt(0)}`}}async attachXIDs(t){return this.xidPromiseCallback?eA(t,this.xidPromiseCallback):Promise.resolve(t)}}var rs=r(9069);let ra=t=>window.history.replaceState({},"",t);var rc=(t,e=ra)=>{let r=window.location.href,n=window.location.hash,i=""!==n?r.replace(n,""):r,{url:o,query:s}=(0,rs.parseUrl)(i),a=tn(s,t);if(Object.keys(a).length>0){let r=tr(s,t);if(Object.keys(r).length>0){let t=`${o}?${(0,rs.stringify)(r)}${n}`;e(t)}else e(`${o}${n}`)}return a};class ru{constructor(){(0,O.Z)(this,"handleOriginParameters",(t,e)=>{let r=Object.keys(t);if(!(r.length>0))throw Error("Empty parameter mapping provided");let n=r.filter(t=>0>Object.values(I.W5).indexOf(t));if(n.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${n.join()}!`);let i=rc((t,e)=>r.indexOf(e)>=0,e);return Object.keys(i).map(e=>{let r=t[e](i[e]);return{[e]:r}}).reduce((t,e)=>Object.assign(t,e),{})}),this._originStore={}}}let rl="/gateway/api/gasv3/api/v1",rf=()=>"as.staging.atl-paas-us-gov-mod.net/api/v1",rh=()=>"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1",rd=({useStargate:t,env:e,useLegacyUrl:r,envOverride:n})=>{if(e===I.gq.LOCAL||e===I.gq.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(e===I.gq.PROD&&n)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return t?r?e===I.gq.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":rh():window.location.host+rl:e===I.gq.PROD?"as.atlassian-us-gov-mod.com/api/v1":rf()},rp=({useStargate:t,env:e,useLegacyUrl:r})=>t?r?e===I.gq.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+rl:e===I.gq.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1",rm="session.id",ry="session.expiry",rg=/^\d+$/,rb=()=>{};class rv{constructor(t={}){(0,O.Z)(this,"_generateNewSessionId",()=>{let t=Date.now().toString();return this._safeLocalStorage.setItem(rm,t),this._onNewSessionStarted&&this._onNewSessionStarted(),t}),(0,O.Z)(this,"_updateSessionExpiry",()=>{let t=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(ry,t.toString()),t}),(0,O.Z)(this,"_debouncedUpdateSessionExpiry",t=>{let{_updateSessionExpiry:e}=this;if(t<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return e();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{e()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=t.sessionExpiryTime||18e5,this._sessionExpiryDebounce=t.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=t.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=t.onNewSessionStarted?t.onNewSessionStarted:rb,this._safeLocalStorage=new e$}getCurrentSessionId(){let t=this._safeLocalStorage.getItem(rm),e=parseInt(this._safeLocalStorage.getItem(ry)||"0",10)||0;return this._debouncedUpdateSessionExpiry(e),!t||e<=Date.now()||Number.isNaN(e)?this._generateNewSessionId():rg.test(t)?t:this._generateNewSessionId()}}var rO=class extends eW{constructor(t){let e;try{e=window.sessionStorage||eF}catch{e=eF}super(e,t)}};let rw="tab.id";class rE{constructor(){(0,O.Z)(this,"_generateNewTabId",()=>{let t=E()();return this._safeSessionStorage.setItem(rw,t),t}),this._safeSessionStorage=new rO}getCurrentTabId(){let t=this._safeSessionStorage.getItem(rw);return t||(t=this._generateNewTabId()),t}}function rI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function rS(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rI(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rI(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}let r_="taskSessions",rT="taskSessionsInit",rA="awc.";class rP{constructor(){(0,O.Z)(this,"_taskSessionsNotRecentlyInitialised",t=>null===this._safeSessionStorage.getItem(r_)||null===this._safeSessionStorage.getItem(rT)||parseInt(this._safeSessionStorage.getItem(rT)||"0",10)<t-3e3),(0,O.Z)(this,"_removeTaskSessionPrefix",(t,e)=>e.split(rA)[1]),(0,O.Z)(this,"_isTaskSessionQueryParam",(t,e)=>e.startsWith(rA)),(0,O.Z)(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(r_)||"")}catch{return{}}}),(0,O.Z)(this,"_writeToSessionStorage",t=>{try{this._safeSessionStorage.setItem(r_,JSON.stringify(t))}catch{}}),(0,O.Z)(this,"_appendTaskSessions",t=>{let e=this.getAllTaskSessions(),r=null===e?t:Object.assign(e,t);this._writeToSessionStorage(r)}),(0,O.Z)(this,"_safelyRemoveKey",(t,e)=>null===t?{}:(delete t[e],t)),(0,O.Z)(this,"createTaskSession",t=>{let e=E()(),r={};return r[t]=e,this._appendTaskSessions(r),e}),(0,O.Z)(this,"createTaskSessionWithProvidedId",(t,e)=>{if("string"!=typeof e)throw TypeError("invalid taskSessionId, must be string");let r={};r[t]=e,this._appendTaskSessions(r)}),(0,O.Z)(this,"completeTaskSession",t=>{let e=this.getAllTaskSessions(),r=this._safelyRemoveKey(e,t);this._writeToSessionStorage(r)}),(0,O.Z)(this,"formatTaskSessionQueryString",({uri:t,includedTaskSessions:e})=>{let{url:r,query:n}=(0,rs.parseUrl)(t),i=this.getAllTaskSessions(),o=e?te(i,e):ti(i,Object.values(I.W5));if(0===Object.keys(o).length)return t;let s=rS(rS({},tt(o,(t,e)=>rA+e)),n);return`${r}?${(0,rs.stringify)(s)}`}),(0,O.Z)(this,"stripQueryParameters",()=>{let t=tt(rc(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(t)});let t=Date.now();this._safeSessionStorage=new rO;try{this._taskSessionsNotRecentlyInitialised(t)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(rT,t.toString()))}catch{}}}let rj=eU.AWC_ANALYTICS_DEBUG.getKey(),rk="synthetic",rD=()=>{try{return JSON.parse(eC().get(rj)||"false")}catch{eC().remove(rj)}return!1};var rx=class{constructor(){(0,O.Z)(this,"_bind",()=>{typeof window>"u"||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch{}}})}),(0,O.Z)(this,"_cache",t=>{typeof window>"u"||(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(t))}),(0,O.Z)(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),(0,O.Z)(this,"saveEvent",t=>{t&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),t.tags instanceof Array?t.tags.push(rk):t.tags=[rk],this._cache(t))}),this._isDebugCookieEnabled=rD(),this._isDebugCookieEnabled&&this._bind()}};let rR=["embeddedProduct"];function rN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function rC(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rN(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class rL{constructor(t,e,r,n={}){if((0,O.Z)(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),(0,O.Z)(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),(0,O.Z)(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),(0,O.Z)(this,"_bindEventListeners",()=>{"u">typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))}),(0,O.Z)(this,"_unbindEventListeners",()=>{"u">typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))}),(0,O.Z)(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),(0,O.Z)(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),(0,O.Z)(this,"_getProductKey",(t,e)=>{let r=t;return e&&(r+=`-${e}`),r}),(0,O.Z)(this,"_getLastSentTimestamp",(t,e,r)=>(((this._parseLocalStorageData()||{})[r]||{})[e]||{})[t]||null),(0,O.Z)(this,"_parseLocalStorageData",()=>{let t=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(t||"")}catch{return this._safeLocalStorage.removeItem(this._storageKey),null}}),(0,O.Z)(this,"_setLastSentTimestamp",(t,e,r)=>{let n=this._parseLocalStorageData()||{},i=n[r]||{},o=i[e]||{};o[t]=Date.now(),i[e]=o,n[r]=i,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(n))}),(0,O.Z)(this,"_shouldSendEvent",(t,e,r,n)=>!!document.hasFocus()&&(e===I.ox.NONE||!!r)&&!!n&&Date.now()-this._getLastSentTimestamp(t,r,n)>this._throttle),(0,O.Z)(this,"_handleInterval",()=>{let t=this._getContext(),{embeddedProduct:e}=t,r=tQ(t,rR);this._sendEvent(this._product,r),e&&this._sendEvent(e,r,!0)}),(0,O.Z)(this,"_sendEvent",(t,e,r=!1)=>{let{subproduct:n,tenantIdType:i,tenantId:o,userId:s,lastScreenEvent:a,attributes:c}=e,u=this._getProductKey(t,n);if(this._shouldSendEvent(u,i,o,s)){this._setLastSentTimestamp(u,o,s);let e=this._createEvent(t,n,r,a,c);this._onEvent(e)}}),(0,O.Z)(this,"_createEvent",(t,e,r,n,i)=>{let o={product:t,source:"ui",action:"viewed",actionSubject:"ui",attributes:i};return r&&(o.subproduct=null,o.version=null,o.attributes=rC(rC({},o.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:e,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),n&&(o.attributes=rC(rC({},o.attributes),{},{lastScreenEvent:{name:n.name,attributes:n.attributes}})),o}),!t)throw Error("Missing productInfo");if(!t.product)throw Error("Missing productInfo.product");if(!e)throw Error("Missing getContext callback");if("function"!=typeof e)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=t,this._product=t.product,this._getContext=e,this._onEvent=r,this._delay=n.delay||2e3,this._throttle=n.throttle||36e5,this._storageKey=n.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new e$({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function rM(t,e){return t&&"function"==typeof t?()=>{t(e)}:null}let rZ=((b={}).XC="xc",b.UID="uid",b);(v={}).NEW="NEW",v.CHANGED="CHANGED",v.EXISTING="EXISTING",v.TIMEOUT="TIMEOUT",v.ERROR="ERROR",v.UNAVAILABLE="UNAVAILABLE",v.MALFORMED="MALFORMED",v.UNKNOWN="UNKNOWN";let rU=()=>[{type:rZ.XC,state:"TIMEOUT"},{type:rZ.UID,state:"TIMEOUT"}],rF=()=>[{type:rZ.XC,state:"UNKNOWN"},{type:rZ.UID,state:"UNKNOWN"}],rB=(t,e)=>{if(t&&e&&"function"==typeof e)return Promise.race([e().catch(()=>()=>rF()),new Promise(t=>{setTimeout(()=>t(()=>rU()),5e3)})])};var rq=r(16585);function rW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function r$(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rW(Object(r),!0).forEach(function(e){(0,O.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rW(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}let rG="last.screen.event";class rV{constructor(t,e={}){if((0,O.Z)(this,"_useStargate",t=>t??!0),(0,O.Z)(this,"_endsWith",(t,e)=>-1!==t.indexOf(e,t.length-e.length)),(0,O.Z)(this,"_changeInternalUserId",(t,e)=>{this.eventProcessor.getUser().setUserId(t),e&&e!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(e)}),(0,O.Z)(this,"_createSubproductGetter",t=>D(t,"Cannot get subproduct from the callback. Proceeding without it.")),(0,O.Z)(this,"_createEmbeddedProductGetter",t=>D(t,"Cannot get embeddedProduct from the callback. Proceeding without it.")),(0,O.Z)(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rG)||"")}catch{return this._safeSessionStorage.removeItem(rG),null}}),(0,O.Z)(this,"_setLastScreenEvent",t=>{this._safeSessionStorage.setItem(rG,JSON.stringify({name:t.name,attributes:t.attributes}))}),(0,O.Z)(this,"_shouldEventBeDelayed",t=>{if(!t.tags||-1===t.tags.indexOf("measurement"))return!1;let e=!1!==t.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!e}),(0,O.Z)(this,"_fireEvent",(t,e,r,n)=>{switch(e.eventType){case I.a7.UI:case I.a7.OPERATIONAL:case I.a7.TRACK:return this.eventProcessor.track(t,e,r,n);case I.a7.SCREEN:return this.eventProcessor.page(t,e,r,n);case I.a7.IDENTIFY:return this.eventProcessor.identify(t,e,r,n);default:throw Error(`No handler has been defined for events of type ${e.eventType}`)}}),(0,O.Z)(this,"_fireDelayedEvent",(t,e,r,n)=>{try{this._changeInternalUserId(n.userId,n.anonymousId),e.tags=[...e.tags||[],"sentWithDelay"],this._fireEvent(t,e,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),(0,O.Z)(this,"_delayEvent",(t,e,r,n,i)=>{this.eventDelayQueue.push(t,e,r,n),i&&i()}),(0,O.Z)(this,"_processEvent",(t,e,r,n)=>(this._testingCache.saveEvent(e),this._shouldEventBeDelayed(e)?(this._delayEvent(t,e,r,this._userInfo,n),Promise.resolve()):this._fireEvent(t,e,r,n))),(0,O.Z)(this,"setEmbeddedProduct",t=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(t),this.resetUIViewedTimers()}),(0,O.Z)(this,"clearEmbeddedProduct",()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),(0,O.Z)(this,"setSubproduct",t=>{this._productInfo.subproduct=this._createSubproductGetter(t),this.resetUIViewedTimers()}),(0,O.Z)(this,"setOriginTracingHandlers",t=>{let e=this.originTracing.handleOriginParameters(t,this._historyReplaceFn);Object.keys(e).forEach(t=>{"u">typeof e[t].taskSessionId&&this.task.createTaskSessionWithProvidedId(t,e[t].taskSessionId)});let r={};return Object.keys(e).forEach(t=>{e[t].originTracingAttributes?r[t]=e[t].originTracingAttributes:rq.warn(`Handling method for origin parameter ${t} has not returned any attributes`)}),Object.keys(e).length>0?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()}),(0,O.Z)(this,"setTenantInfo",(t,e)=>{if(!t)throw Error("Missing tenantIdType");if(t!==I.ox.NONE&&!e)throw Error("Missing tenantId");if(!(0,I.P9)(I.ox,t))throw Error(`Invalid tenantIdType '${t}', must be an tenantType: [${(0,I.TT)(I.ox)}]`);this._tenantInfo={tenantIdType:t,tenantId:e}}),(0,O.Z)(this,"clearTenantInfo",()=>{this._tenantInfo={}}),(0,O.Z)(this,"setOrgInfo",t=>{if(!t)throw Error("Missing orgId");this._orgInfo={orgId:t}}),(0,O.Z)(this,"clearOrgInfo",()=>{this._orgInfo={}}),(0,O.Z)(this,"setWorkspaceInfo",t=>{if(!t)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:t}}),(0,O.Z)(this,"clearWorkspaceInfo",()=>{this._workspaceInfo={}}),(0,O.Z)(this,"setUserInfo",(t,e)=>{(function(t,e){if(!t)throw Error("Missing userIdType");if(!e)throw Error("Missing userId");if(!(0,I.P9)(I.AW,t))throw Error(`Invalid userIdType '${t}', must be an userType: [${(0,I.TT)(I.AW)}]`)})(t,e),this._changeInternalUserId(e),this._userInfo={userIdType:t,userId:e,anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,O.Z)(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,O.Z)(this,"setAlias",(t,e)=>{if(!t)throw Error("Missing aliasType");if(!(0,I.P9)(I.kB,t))throw Error(`Invalid aliasType '${t}', must be an aliasType: [${(0,I.TT)(I.kB)}]`);this._aliases[t]=e}),(0,O.Z)(this,"clearAlias",()=>{this._aliases={}}),(0,O.Z)(this,"setGroup",(t,e)=>{if(!t)throw Error("Missing groupType");if(!(0,I.P9)(I.kW,t))throw Error(`Invalid groupType '${t}', must be an groupType: [${(0,I.TT)(I.kW)}]`);this._groups[t]=e}),(0,O.Z)(this,"clearGroup",()=>{this._groups={}}),(0,O.Z)(this,"getAnonymousId",()=>this._userInfo.anonymousId),(0,O.Z)(this,"setUIViewedAttributes",t=>{if(!t)throw Error("Missing uiViewedAttributes");if("object"!=typeof t||Array.isArray(t))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=r$({},t)}),(0,O.Z)(this,"getUIViewedAttributes",()=>this._uiViewedAttributes),(0,O.Z)(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),(0,O.Z)(this,"sendIdentifyEvent",(t,e,r)=>{this.setUserInfo(t,e);let n={userIdType:t,eventType:I.a7.IDENTIFY};return this._processEvent(e,n,this._context,r)}),(0,O.Z)(this,"sendPageEvent",(t,e)=>this.sendScreenEvent(t,e)),(0,O.Z)(this,"sendScreenEvent",(t,e,r)=>{let n,i,o,s;"object"==typeof t?(n=t.name,i=t.attributes,o=t.containers,s=t.tags):(n=t,i=r),function(t){if(!t)throw Error("Missing name")}(n),tc(o);let a=function(t,e,r,n,i,o,s,a,c,u,l,f,h,d,p,m){let y=V(t),g=Z(e),b=U(r),v=F(u),O=B(f),w={title:"",path:"",url:"",referrer:"",search:"",eventType:I.a7.SCREEN};return M(M(M(M(M(M(M(M(M(M(M(M({},y),g),b),v),w),K("attributes",n)),K("nonPrivacySafeAttributes",i)),Q(d)),$(h)),{},{tags:o,tabId:s,sessionId:a,taskSessions:c,pageLoadId:l},O),q(p)),W(m))}(this._productInfo,this._tenantInfo,this._userInfo,i,t.nonPrivacySafeAttributes,s,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,t,o,this._aliases,this._groups),c=r$({name:n},a);return this._setLastScreenEvent(c),this._processEvent(n,c,this._context,rM(e,c))}),(0,O.Z)(this,"sendTrackEvent",(t,e)=>{tl(t);let r=z(this._productInfo,this._tenantInfo,this._userInfo,t,I.a7.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(Y(t),r,this._context,rM(e,r))}),(0,O.Z)(this,"sendUIEvent",(t,e)=>{tl(t);let r=z(this._productInfo,this._tenantInfo,this._userInfo,t,I.a7.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(Y(t),r,this._context,rM(e,r))}),(0,O.Z)(this,"sendOperationalEvent",(t,e)=>{tl(t);let r=z(this._productInfo,this._tenantInfo,this._userInfo,t,I.a7.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(Y(t),r,this._context,rM(e,r))}),(0,O.Z)(this,"startUIViewedEvent",t=>{this.stopUIViewedEvent(),this._uiViewedEvent=new rL(this._productInfo,()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),e=>this.sendUIEvent(e,t)),this._uiViewedEvent.start()}),(0,O.Z)(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),(0,O.Z)(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),(0,O.Z)(this,"startApdexEvent",t=>{this._apdexEvent.start(t)}),(0,O.Z)(this,"getApdexStart",t=>this._apdexEvent.getStart(t)),(0,O.Z)(this,"stopApdexEvent",(t,e)=>{this._apdexEvent.stop(t,e)}),(0,O.Z)(this,"startLowPriorityEventDelay",(t,e)=>{this.eventDelayQueue.startLowPriorityEventDelay(t,e)}),(0,O.Z)(this,"stopLowPriorityEventDelay",()=>{this.eventDelayQueue.stopLowPriorityEventDelay()}),(0,O.Z)(this,"onEvent",(t,e)=>{if(!e)throw Error("Missing analyticsData");if(!e.eventType)throw Error("Missing analyticsData.eventType");if(e.eventType===I.a7.TRACK)return this.sendTrackEvent(e);if(e.eventType===I.a7.UI)return this.sendUIEvent(e);if(e.eventType===I.a7.OPERATIONAL)return this.sendOperationalEvent(e);if(e.eventType===I.a7.SCREEN)return this.sendScreenEvent(e.name,null,e.attributes);if(e.eventType===I.a7.IDENTIFY)return this.sendIdentifyEvent(e.userIdType,e.userId);throw Error(`Invalid analyticsData.eventType '${e.eventType}', must be an eventType: [${(0,I.TT)(I.a7)}]`)}),!t)throw Error("Missing productInfo");if(!t.env)throw Error("Missing productInfo.env");if(!t.product)throw Error("Missing productInfo.product");if(!(0,I.P9)(I.gq,t.env))throw Error(`Invalid productInfo.env '${t.env}', must be an envType: [${(0,I.TT)(I.gq)}]`);if(t.perimeter&&!(0,I.P9)(I.T_,t.perimeter))throw Error(`Invalid productInfo.perimeter '${t.perimeter}', must be an perimeterType: [${(0,I.TT)(I.T_)}]`);if(t.origin){if(!(0,I.P9)(I.mO,t.origin))throw Error(`Invalid productInfo.origin '${t.origin}', must be an originType: [${(0,I.TT)(I.mO)}]`)}else t.origin=I.mO.WEB;t.platform?function(t){if(!(0,I.P9)(I.qZ,t.platform))throw Error(`Invalid productInfo.platform '${t.platform}', must be a platformType: [${(0,I.TT)(I.qZ)}]`);if(t.origin===I.mO.DESKTOP&&!(0,I.P9)(I.Nw,t.platform))throw Error(`Invalid productInfo.platform '${t.platform}', must be one of [mac, linux, windows]`);if(t.origin===I.mO.WEB&&!(0,I.P9)(I.uB,t.platform))throw Error(`Invalid productInfo.platform '${t.platform}', must be one of [web, mobileWeb]`)}(t):t.platform=t.origin===I.mO.WEB?I.qZ.WEB:I.qZ.DESKTOP,this.logger=e.logger||rq,this._productInfo=r$(r$({},t),{},{subproduct:this._createSubproductGetter(t.subproduct),embeddedProduct:this._createEmbeddedProductGetter(t.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},null!=t&&t.embeddedContext&&(this._embeddedContext=t.embeddedContext,x(this._embeddedContext)&&this.setUIViewedAttributes({embeddedType:this._embeddedContext.embeddedType,embeddedFromProduct:this._embeddedContext.embeddedFromProduct,embeddedFromSubproduct:this._embeddedContext.embeddedFromSubproduct,embeddedFromTopLevelDomain:this._embeddedContext.embeddedFromTopLevelDomain}),R(this._embeddedContext)&&this.setUIViewedAttributes({embeddedType:this._embeddedContext.embeddedType,embeddedFromTopLevelDomain:this._embeddedContext.embeddedFromTopLevelDomain})),this._context=function(t){let e=window.screen||{};return{context:{locale:t.locale,screen:{width:e.width,height:e.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"0.0.0-development"}}}}(this._productInfo),this._safeSessionStorage=new rO;let r=this._useStargate(e.useStargate),n=e.apiHost||function({useStargate:t,env:e,useLegacyUrl:r,perimeter:n,envOverride:i}){return n===I.T_.FEDRAMP_MODERATE?rd({useStargate:t,env:e,useLegacyUrl:r,envOverride:i}):rp({useStargate:t,env:e,useLegacyUrl:r})}({useStargate:r,env:t.env,useLegacyUrl:e.useLegacyUrl,perimeter:t.perimeter,envOverride:t.envOverride}),i=e.apiHostProtocol||"https",o={maxRetryDelay:6e4,minRetryDelay:e.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:e.flushWaitInterval,flushBeforeUnload:e.flushBeforeUnload},s=`awc-${t.env}`,a=e.disableCookiePersistence||!1;this.eventProcessor=new ro({apiHost:n,apiHostProtocol:i,product:t.product,retryQueuePrefix:s,retryQueueOptions:o,xidPromiseGetter:()=>rB(e.xidConsent,e.xidPromiseFn),logger:this.logger,disableCookiePersistence:a}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(e?.customAnonymousIdGenerator)},this._pageVisibility=new S,this._tabTracking=new rE,this._sessionTracking=new rv({sessionExpiryTime:e.sessionExpiryTime,onNewSessionStarted:e.onNewSessionStarted}),this.task=new rP,this.originTracing=new ru,this._apdexEvent=new P(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof e.historyReplaceFn?e.historyReplaceFn:ra,this.eventDelayQueue=new tv(this._fireDelayedEvent,e.delayQueueCompressors||[]),this._testingCache=new rx,this._pageLoadId=E()(),this._workspaceInfo={},this._aliases={},this._groups={}}}},71493:function(t,e,r){"use strict";var n,i,o,s,a,c,u,l,f,h,d;r.d(e,{AW:function(){return O},Nw:function(){return E},P9:function(){return T},TT:function(){return _},T_:function(){return A},W5:function(){return S},a7:function(){return m},bi:function(){return v},gq:function(){return p},jM:function(){return w},kB:function(){return P},kW:function(){return j},mO:function(){return g},ox:function(){return b},qZ:function(){return y},uB:function(){return I}});let p=((n={}).LOCAL="local",n.DEV="dev",n.STAGING="staging",n.PROD="prod",n),m=((i={}).TRACK="track",i.UI="ui",i.OPERATIONAL="operational",i.SCREEN="screen",i.IDENTIFY="identify",i),y=((o={}).MAC="mac",o.LINUX="linux",o.WINDOWS="windows",o.DESKTOP="desktop",o.WEB="web",o.MOBILE_WEB="mobileWeb",o),g=((s={}).DESKTOP="desktop",s.WEB="web",s),b=((a={}).CLOUD_ID="cloudId",a.ORG_ID="orgId",a.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",a.HALP_TEAM_ID="halpTeamId",a.LOOM_ORG_ID="loomOrgId",a.TRANSACTION_ACCOUNT_ID="transactionAccountId",a.TRELLO_WORKSPACE_ID="trelloWorkspaceId",a.NONE="none",a),v=((c={}).FIRST_PARTY="FIRST_PARTY",c.THIRD_PARTY="THIRD_PARTY",c),O=((u={}).ATLASSIAN_ACCOUNT="atlassianAccount",u.HASHED_EMAIL="hashedEmail",u.LOOM="loom",u.TRELLO="trello",u.OPSGENIE="opsgenie",u.HALP="halp",u),w=((l={}).TRANSITION="transition",l.INITIAL_LOAD="initialLoad",l),E=Object.freeze([y.DESKTOP,y.MAC,y.LINUX,y.WINDOWS]),I=Object.freeze([y.WEB,y.MOBILE_WEB]),S=((f={}).ATL_ORIGIN="atlOrigin",f);function _(t){return Object.values(t)}function T(t,e){return Object.values(t).indexOf(e)>-1}let A=((h={}).C5="c5",h.COMMERCIAL="commercial",h.FEDRAMP_MODERATE="fedramp-moderate",h.FEDRAMP_HIGH="fedramp-high",h),P={},j=((d={}).TRANSACTION_ACCOUNT_ID="transactionAccountId",d)},45659:function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function c(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function f(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,{Z:function(){return _}});var h,d=r(59781),p=r.n(d),m=r(99528),y=function(){return h||(h=g({atob:"function"==typeof atob&&atob.bind(void 0)||"u">typeof m.lW&&function(t){return m.lW.from(t,"base64").toString()},btoa:"function"==typeof btoa&&btoa.bind(void 0)||"u">typeof m.lW&&function(t){return m.lW.from(t).toString("base64")},URLSearchParams:"function"==typeof URLSearchParams&&URLSearchParams||r(80396).URLSearchParams}))},g=function(t){if(!(t.atob&&t.btoa&&t.URLSearchParams))throw TypeError("Origin-Tracing: missing environment APIs. Required: btoa(), atob(), URLSearchParams() (or in Node: Buffer, require('url').URLSearchParams).");return t},b={confluence:"c",jira:"j",stride:"s",bitbucket:"b",trello:"t"};function v(t){var e=O();return function(){var r,n=s(t);if(e){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O=function(){return!!t})()}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var I="atlOrigin",S={originLibrary:"origin-tracing.js@".concat("6.1.5")},_=function(){function t(e){var r=e.id,n=void 0===r?t.generateId():r,i=e.product,o=e.dangerouslySkipValidation;u(this,t),this.id=n,this.product=i,void 0!==o&&o||this.validate()}return f(t,[{key:"encode",value:function(){var t,e,r,n;return t=JSON.stringify({i:(r={id:this.id,product:this.product}).id,p:(n=r.product)&&n in b?b[n]:n}),null==(e=y().btoa(t))?"":String(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"addToUrl",value:function(t){var e=this;return P(t,function(t){var r=new(y()).URLSearchParams(t);return r.set(I,e.encode()),r.toString()})}},{key:"isEmpty",value:function(){return!1}},{key:"isMalformed",value:function(){return!this.isEmpty()&&!this.isValid()}},{key:"isValid",value:function(){return!0}},{key:"toAnalyticsAttributes",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.transformValue,n=void 0===r?function(t){return null===t?void 0:t}:r,i=e.hasGeneratedId;return E((c(t={},void 0!==i&&i?"originIdGenerated":"originId",n(this.id)),c(t,"originProduct",n(this.product)),t),S)}},{key:"validate",value:function(){if(!t.isValidId(this.id))throw TypeError("Invalid Origin id");if(!t.isValidProduct(this.product))throw TypeError("Missing/invalid Origin product")}}],[{key:"isValidId",value:function(t){return"string"==typeof t&&/^[-_a-zA-Z0-9]{1,36}$/.test(t)}},{key:"isValidProduct",value:function(t){return"string"==typeof t&&/^[-_a-zA-Z0-9]{1,20}$/.test(t)}},{key:"generateId",value:function(){return p()().replace(/-/g,"")}},{key:"createEmpty",value:function(){return new T}},{key:"createMalformed",value:function(){return new A}},{key:"fromUrl",value:function(e){var r=new(y()).URLSearchParams;return P(e,function(t){r=new(y()).URLSearchParams(t)}),t.fromEncoded(r.get(I))}},{key:"fromEncoded",value:function(e){if(!e)return t.createEmpty();try{return t.decode(e)}catch{return t.createMalformed()}}},{key:"removeFromUrl",value:function(t){return P(t,function(t){var e=new(y()).URLSearchParams(t);return e.delete(I),e.toString()})}},{key:"decode",value:function(e){var r,n,i,o=(i=function(t){if(null==t)return"";var e=String(t).replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return e+"===".slice(0,r)}(e),r=JSON.parse(y().atob(i)),n={},r.i&&(n.id=r.i),r.p&&(n.product=function(t){for(var e=Object.keys(b),r=0;r<e.length;r++){var n=e[r];if(t===b[n])return n}return t}(r.p)),n);return new t(o)}}]),t}(),T=function(t){i(r,t);var e=v(r);function r(){return u(this,r),e.call(this,{id:null,product:null,dangerouslySkipValidation:!0})}return f(r,[{key:"isValid",value:function(){return!1}},{key:"isEmpty",value:function(){return!0}},{key:"toAnalyticsAttributes",value:function(){return E({},S)}}]),r}(_),A=function(t){i(r,t);var e=v(r);function r(){return u(this,r),e.call(this,{id:null,product:null,dangerouslySkipValidation:!0})}return f(r,[{key:"isValid",value:function(){return!1}},{key:"isEmpty",value:function(){return!1}},{key:"toAnalyticsAttributes",value:function(){return E({originMalformed:!0},S)}}]),r}(_);function P(t,e){return String(t).replace(/(^[^?#]*)(?:\?)?([^#]*?)(#.*|$)$/,function(t,r,n,i){var o=e(n);return o&&(o="?".concat(o)),"".concat(r).concat(o).concat(i)})}},19884:function(t,e,r){"use strict";function n(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.d(e,{Z:function(){return n}})},62527:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}r.d(e,{Z:function(){return n}})},36260:function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,{Z:function(){return i}})},13174:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return n}})},37807:function(t,e,r){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}r.d(e,{Z:function(){return n}})},35919:function(t,e,r){"use strict";function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.d(e,{Z:function(){return n}})},64156:function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}r.d(e,{Z:function(){return i}})},99721:function(t,e,r){"use strict";function n(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}r.d(e,{Z:function(){return n}})},32402:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}r.d(e,{Z:function(){return s}});var o=r(19884);function s(t,e){return e&&("object"===i(e)||"function"==typeof e)?e:(0,o.Z)(t)}},24339:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(e,{Z:function(){return n}})},57636:function(t,e,r){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}r.d(e,{Z:function(){return n}})},95032:function(t,e,r){"use strict";var n=r(61733),i=r(16585);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s,a,c=r(40385).codes,u=c.ERR_AMBIGUOUS_ARGUMENT,l=c.ERR_INVALID_ARG_TYPE,f=c.ERR_INVALID_ARG_VALUE,h=c.ERR_INVALID_RETURN_VALUE,d=c.ERR_MISSING_ARGS,p=r(99533),m=r(25359).inspect,y=r(25359).types,g=y.isPromise,b=y.isRegExp,v=Object.assign?Object.assign:r(79496).assign,O=Object.is?Object.is:r(37701);function w(){var t=r(63026);s=t.isDeepEqual,a=t.isDeepStrictEqual}var E=!1,I=t.exports=A,S={};function _(t){throw t.message instanceof Error?t.message:new p(t)}function T(t,e,r,n){if(!r){var i=!1;if(0===e)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new p({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function A(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];T.apply(void 0,[A,e.length].concat(e))}I.fail=function t(e,r,o,s,a){var c,u=arguments.length;if(0===u?c="Failed":1===u?(o=e,e=void 0):(!1===E&&(E=!0,(n.emitWarning?n.emitWarning:i.warn.bind(i))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===u&&(s="!=")),o instanceof Error)throw o;var l={actual:e,expected:r,operator:void 0===s?"fail":s,stackStartFn:a||t};void 0!==o&&(l.message=o);var f=new p(l);throw c&&(f.message=c,f.generatedMessage=!0),f},I.AssertionError=p,I.ok=A,I.equal=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");e!=r&&_({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})},I.notEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");e==r&&_({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})},I.deepEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(e,r)||_({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})},I.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(e,r)&&_({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})},I.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),a(e,r)||_({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})},I.notDeepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),a(e,r)&&_({actual:e,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:t})},I.strictEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");O(e,r)||_({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})},I.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new d("actual","expected");O(e,r)&&_({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var P=function t(e,r,n){var i=this;(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,t),r.forEach(function(t){t in e&&(void 0!==n&&"string"==typeof n[t]&&b(e[t])&&e[t].test(n[t])?i[t]=n[t]:i[t]=e[t])})};function j(t,e,r,n){if("function"!=typeof e){if(b(e))return e.test(t);if(2==arguments.length)throw new l("expected",["Function","RegExp"],e);if("object"!==o(t)||null===t){var i=new p({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var c=Object.keys(e);if(e instanceof Error)c.push("name","message");else if(0===c.length)throw new f("error",e,"may not be an empty object");return void 0===s&&w(),c.forEach(function(i){"string"==typeof t[i]&&b(e[i])&&e[i].test(t[i])||function(t,e,r,n,i,o){if(!(r in t)||!a(t[r],e[r])){if(!n){var s=new P(t,i),c=new P(e,i,t),u=new p({actual:s,expected:c,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=t,u.expected=e,u.operator=o.name,u}_({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o})}}(t,e,i,r,c,n)}),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function k(t){if("function"!=typeof t)throw new l("fn","Function",t);try{t()}catch(t){return t}return S}function D(t){return g(t)||null!==t&&"object"===o(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function x(t){return Promise.resolve().then(function(){var e;if("function"==typeof t){if(!D(e=t()))throw new h("instance of Promise","promiseFn",e)}else if(D(t))e=t;else throw new l("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return S}).catch(function(t){return t})})}function R(t,e,r,n){if("string"==typeof r){if(4==arguments.length)throw new l("error",["Object","Error","Function","RegExp"],r);if("object"===o(e)&&null!==e){if(e.message===r)throw new u("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new u("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==o(r)&&"function"!=typeof r)throw new l("error",["Object","Error","Function","RegExp"],r);if(e===S){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var s="rejects"===t.name?"rejection":"exception";_({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(s).concat(i),stackStartFn:t})}if(r&&!j(e,r,n,t))throw e}function N(t,e,r,n){if(e!==S){if("string"==typeof r&&(n=r,r=void 0),!r||j(e,r)){var i=n?": ".concat(n):".",o="doesNotReject"===t.name?"rejection":"exception";_({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}I.throws=function t(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];R.apply(void 0,[t,k(e)].concat(n))},I.rejects=function t(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return x(e).then(function(e){return R.apply(void 0,[t,e].concat(n))})},I.doesNotThrow=function t(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];N.apply(void 0,[t,k(e)].concat(n))},I.doesNotReject=function t(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return x(e).then(function(e){return N.apply(void 0,[t,e].concat(n))})},I.ifError=function t(e){if(null!=e){var r="ifError got unwanted exception: ";"object"===o(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?r+=e.constructor.name:r+=e.message:r+=m(e);var n=new p({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if("string"==typeof i){var s=i.split(`
`);s.shift();for(var a=n.stack.split(`
`),c=0;c<s.length;c++){var u=a.indexOf(s[c]);if(-1!==u){a=a.slice(0,u);break}}n.stack="".concat(a.join(`
`),`
`).concat(s.join(`
`))}throw n}},I.strict=v(function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];T.apply(void 0,[t,r.length].concat(r))},I,{equal:I.strictEqual,deepEqual:I.deepStrictEqual,notEqual:I.notStrictEqual,notDeepEqual:I.notDeepStrictEqual}),I.strict.strict=I.strict},99533:function(t,e,r){"use strict";var n=r(61733);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){return e&&("object"===f(e)||"function"==typeof e)?e:s(t)}function s(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if("u">typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function c(t,e,r){return(c=!function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&u(i,r.prototype),i}:Reflect.construct).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=r(25359).inspect,d=r(40385).codes.ERR_INVALID_ARG_TYPE;function p(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}var m="",y="",g="",b="",v={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function O(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(e){r[e]=t[e]}),Object.defineProperty(r,"message",{value:t.message}),r}function w(t){return h(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var E=function(t){var e,r;function a(t){if(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),"object"!==f(t)||null===t)throw new d("options","Object",t);var e,r=t.message,i=t.operator,c=t.stackStartFn,u=t.actual,h=t.expected,E=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=r)e=o(this,l(a).call(this,String(r)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(m="\x1b[34m",y="\x1b[32m",b="\x1b[39m",g="\x1b[31m"):(m="",y="",b="",g="")),"object"===f(u)&&null!==u&&"object"===f(h)&&null!==h&&"stack"in u&&u instanceof Error&&"stack"in h&&h instanceof Error&&(u=O(u),h=O(h)),"deepStrictEqual"===i||"strictEqual"===i)e=o(this,l(a).call(this,function(t,e,r){var i="",o="",s=0,a="",c=!1,u=w(t),l=u.split(`
`),h=w(e).split(`
`),d=0,O="";if("strictEqual"===r&&"object"===f(t)&&"object"===f(e)&&null!==t&&null!==e&&(r="strictEqualObject"),1===l.length&&1===h.length&&l[0]!==h[0]){var E=l[0].length+h[0].length;if(E<=10){if(("object"!==f(t)||null===t)&&("object"!==f(e)||null===e)&&(0!==t||0!==e))return"".concat(v[r],`

`)+"".concat(l[0]," !== ").concat(h[0],`
`)}else if("strictEqualObject"!==r&&E<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;l[0][d]===h[0][d];)d++;d>2&&(O=`
  `.concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,r-t.length)}(" ",d),"^"),d=0)}}for(var I=l[l.length-1],S=h[h.length-1];I===S&&(d++<2?a=`
  `.concat(I).concat(a):i=I,l.pop(),h.pop(),!(0===l.length||0===h.length));)I=l[l.length-1],S=h[h.length-1];var _=Math.max(l.length,h.length);if(0===_){var T=u.split(`
`);if(T.length>30)for(T[26]="".concat(m,"...").concat(b);T.length>27;)T.pop();return"".concat(v.notIdentical,`

`).concat(T.join(`
`),`
`)}d>3&&(a=`
`.concat(m,"...").concat(b).concat(a),c=!0),""!==i&&(a=`
  `.concat(i).concat(a),i="");var A=0,P=v[r]+`
`.concat(y,"+ actual").concat(b," ").concat(g,"- expected").concat(b),j=" ".concat(m,"...").concat(b," Lines skipped");for(d=0;d<_;d++){var k=d-s;if(l.length<d+1)k>1&&d>2&&(k>4?(o+=`
`.concat(m,"...").concat(b),c=!0):k>3&&(o+=`
  `.concat(h[d-2]),A++),o+=`
  `.concat(h[d-1]),A++),s=d,i+=`
`.concat(g,"-").concat(b," ").concat(h[d]),A++;else if(h.length<d+1)k>1&&d>2&&(k>4?(o+=`
`.concat(m,"...").concat(b),c=!0):k>3&&(o+=`
  `.concat(l[d-2]),A++),o+=`
  `.concat(l[d-1]),A++),s=d,o+=`
`.concat(y,"+").concat(b," ").concat(l[d]),A++;else{var D=h[d],x=l[d],R=x!==D&&(!p(x,",")||x.slice(0,-1)!==D);R&&p(D,",")&&D.slice(0,-1)===x&&(R=!1,x+=","),R?(k>1&&d>2&&(k>4?(o+=`
`.concat(m,"...").concat(b),c=!0):k>3&&(o+=`
  `.concat(l[d-2]),A++),o+=`
  `.concat(l[d-1]),A++),s=d,o+=`
`.concat(y,"+").concat(b," ").concat(x),i+=`
`.concat(g,"-").concat(b," ").concat(D),A+=2):(o+=i,i="",(1===k||0===d)&&(o+=`
  `.concat(x),A++))}if(A>20&&d<_-2)return"".concat(P).concat(j,`
`).concat(o,`
`).concat(m,"...").concat(b).concat(i,`
`)+"".concat(m,"...").concat(b)}return"".concat(P).concat(c?j:"",`
`).concat(o).concat(i).concat(a).concat(O)}(u,h,i)));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var I=v[i],S=w(u).split(`
`);if("notStrictEqual"===i&&"object"===f(u)&&null!==u&&(I=v.notStrictEqualObject),S.length>30)for(S[26]="".concat(m,"...").concat(b);S.length>27;)S.pop();e=1===S.length?o(this,l(a).call(this,"".concat(I," ").concat(S[0]))):o(this,l(a).call(this,"".concat(I,`

`).concat(S.join(`
`),`
`)))}else{var _=w(u),T="",A=v[i];"notDeepEqual"===i||"notEqual"===i?(_="".concat(v[i],`

`).concat(_)).length>1024&&(_="".concat(_.slice(0,1021),"...")):(T="".concat(w(h)),_.length>512&&(_="".concat(_.slice(0,509),"...")),T.length>512&&(T="".concat(T.slice(0,509),"...")),"deepEqual"===i||"equal"===i?_="".concat(A,`

`).concat(_,`

should equal

`):T=" ".concat(i," ").concat(T)),e=o(this,l(a).call(this,"".concat(_).concat(T)))}return Error.stackTraceLimit=E,e.generatedMessage=!r,Object.defineProperty(s(e),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),e.code="ERR_ASSERTION",e.actual=u,e.expected=h,e.operator=i,Error.captureStackTrace&&Error.captureStackTrace(s(e),c),e.stack,e.name="AssertionError",o(e)}return function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t),e=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:h.custom,value:function(t,e){return h(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){var n;n=r[e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n})}return t}({},e,{customInspect:!1,depth:0}))}}],i(a.prototype,e),r&&i(a,r),a}(a(Error));t.exports=E},40385:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s,a,c={};function u(t,e,r){r||(r=Error);var s=function(r){function s(r,o,a){var c,u;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,s),(c=(u=i(s).call(this,"string"==typeof e?e:e(r,o,a)))&&("object"===n(u)||"function"==typeof u)?u:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)).code=t,c}return function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(s,r),s}(r);c[t]=s}function l(t,e){if(!Array.isArray(t))return"of ".concat(e," ").concat(String(t));var r=t.length;return t=t.map(function(t){return String(t)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}u("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),u("ERR_INVALID_ARG_TYPE",function(t,e,i){if(void 0===s&&(s=r(95032)),s("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(o="not ",e.substr(!a||a<0?0:+a,o.length)===o)?(h="must not be",e=e.replace(/^not /,"")):h="must be",c=" argument",(void 0===u||u>t.length)&&(u=t.length),t.substring(u-c.length,u)===c)d="The ".concat(t," ").concat(h," ").concat(l(e,"type"));else{var o,a,c,u,f,h,d,p=("number"!=typeof f&&(f=0),f+1>t.length||-1===t.indexOf(".",f))?"argument":"property";d='The "'.concat(t,'" ').concat(p," ").concat(h," ").concat(l(e,"type"))}return d+". Received type ".concat(n(i))},TypeError),u("ERR_INVALID_ARG_VALUE",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=r(25359));var i=a.inspect(e);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(n,". Received ").concat(i)},TypeError,RangeError),u("ERR_INVALID_RETURN_VALUE",function(t,e,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(i,".")},TypeError),u("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];void 0===s&&(s=r(95032)),s(e.length>0,"At least one arg needs to be specified");var i="The ",o=e.length;switch(e=e.map(function(t){return'"'.concat(t,'"')}),o){case 1:i+="".concat(e[0]," argument");break;case 2:i+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:i+=e.slice(0,o-1).join(", ")+", and ".concat(e[o-1]," arguments")}return"".concat(i," must be specified")},TypeError),t.exports.codes=c},63026:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=void 0!==/a/g.flags,s=function(t){var e=[];return t.forEach(function(t){return e.push(t)}),e},a=function(t){var e=[];return t.forEach(function(t,r){return e.push([r,t])}),e},c=Object.is?Object.is:r(37701),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},l=Number.isNaN?Number.isNaN:r(46356);function f(t){return t.call.bind(t)}var h=f(Object.prototype.hasOwnProperty),d=f(Object.prototype.propertyIsEnumerable),p=f(Object.prototype.toString),m=r(25359).types,y=m.isAnyArrayBuffer,g=m.isArrayBufferView,b=m.isDate,v=m.isMap,O=m.isRegExp,w=m.isSet,E=m.isNativeError,I=m.isBoxedPrimitive,S=m.isNumberObject,_=m.isStringObject,T=m.isBooleanObject,A=m.isBigIntObject,P=m.isSymbolObject,j=m.isFloat32Array,k=m.isFloat64Array;function D(t){if(0===t.length||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return 10===t.length&&t>=4294967296}function x(t){return Object.keys(t).filter(D).concat(u(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function R(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var N=void 0;function C(t,e,r,n){if(t===e)return 0!==t||!r||c(t,e);if(r){if("object"!==i(t))return"number"==typeof t&&l(t)&&l(e);if("object"!==i(e)||null===t||null===e||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(null===t||"object"!==i(t))return(null===e||"object"!==i(e))&&t==e;if(null===e||"object"!==i(e))return!1}var s=p(t);if(s!==p(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var a=x(t,N),u=x(e,N);return a.length===u.length&&M(t,e,r,n,1,a)}if("[object Object]"===s&&(!v(t)&&v(e)||!w(t)&&w(e)))return!1;if(b(t)){if(!b(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(O(t)){if(!O(e)||(o?t.source!==e.source||t.flags!==e.flags:RegExp.prototype.toString.call(t)!==RegExp.prototype.toString.call(e)))return!1}else if(E(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(g(t)){if(!r&&(j(t)||k(t))){if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}(t,e))return!1}else if(t.byteLength!==e.byteLength||0!==R(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)))return!1;var f=x(t,N),h=x(e,N);return f.length===h.length&&M(t,e,r,n,0,f)}else{if(w(t))return!!w(e)&&t.size===e.size&&M(t,e,r,n,2);if(v(t))return!!v(e)&&t.size===e.size&&M(t,e,r,n,3);if(y(t)){if(t.byteLength!==e.byteLength||0!==R(new Uint8Array(t),new Uint8Array(e)))return!1}else if(I(t)&&(S(t)?!(S(e)&&c(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e))):_(t)?!_(e)||String.prototype.valueOf.call(t)!==String.prototype.valueOf.call(e):T(t)?!T(e)||Boolean.prototype.valueOf.call(t)!==Boolean.prototype.valueOf.call(e):A(t)?!A(e)||BigInt.prototype.valueOf.call(t)!==BigInt.prototype.valueOf.call(e):!P(e)||Symbol.prototype.valueOf.call(t)!==Symbol.prototype.valueOf.call(e)))return!1}return M(t,e,r,n,0)}function L(t,e){return e.filter(function(e){return d(t,e)})}function M(t,e,r,o,c,l){if(5==arguments.length){l=Object.keys(t);var f=Object.keys(e);if(l.length!==f.length)return!1}for(var p=0;p<l.length;p++)if(!h(e,l[p]))return!1;if(r&&5==arguments.length){var m=u(t);if(0!==m.length){var y=0;for(p=0;p<m.length;p++){var g=m[p];if(d(t,g)){if(!d(e,g))return!1;l.push(g),y++}else if(d(e,g))return!1}var b=u(e);if(m.length!==b.length&&L(e,b).length!==y)return!1}else{var v=u(e);if(0!==v.length&&0!==L(e,v).length)return!1}}if(0===l.length&&(0===c||1===c&&0===t.length||0===t.size))return!0;if(void 0===o)o={val1:new Map,val2:new Map,position:0};else{var O=o.val1.get(t);if(void 0!==O){var w=o.val2.get(e);if(void 0!==w)return O===w}o.position++}o.val1.set(t,o.position),o.val2.set(e,o.position);var E=function(t,e,r,o,c,u){var l=0;if(2===u){if(!function(t,e,r,n){for(var o=null,a=s(t),c=0;c<a.length;c++){var u=a[c];if("object"===i(u)&&null!==u)null===o&&(o=new Set),o.add(u);else if(!e.has(u)){if(r||!function(t,e,r){var n=U(r);return n??(e.has(n)&&!t.has(n))}(t,e,u))return!1;null===o&&(o=new Set),o.add(u)}}if(null!==o){for(var l=s(e),f=0;f<l.length;f++){var h=l[f];if("object"===i(h)&&null!==h){if(!Z(o,h,r,n))return!1}else if(!r&&!t.has(h)&&!Z(o,h,r,n))return!1}return 0===o.size}return!0}(t,e,r,c))return!1}else if(3===u){if(!function(t,e,r,o){for(var s=null,c=a(t),u=0;u<c.length;u++){var l=n(c[u],2),f=l[0],h=l[1];if("object"===i(f)&&null!==f)null===s&&(s=new Set),s.add(f);else{var d=e.get(f);if(void 0===d&&!e.has(f)||!C(h,d,r,o)){if(r||!function(t,e,r,n,i){var o=U(r);if(null!=o)return o;var s=e.get(o);return!!((void 0!==s||e.has(o))&&C(n,s,!1,i))&&!t.has(o)&&C(n,s,!1,i)}(t,e,f,h,o))return!1;null===s&&(s=new Set),s.add(f)}}}if(null!==s){for(var p=a(e),m=0;m<p.length;m++){var y=n(p[m],2),f=y[0],g=y[1];if("object"===i(f)&&null!==f){if(!F(s,t,f,g,r,o))return!1}else if(!r&&(!t.has(f)||!C(t.get(f),g,!1,o))&&!F(s,t,f,g,!1,o))return!1}return 0===s.size}return!0}(t,e,r,c))return!1}else if(1===u)for(;l<t.length;l++)if(h(t,l)){if(!h(e,l)||!C(t[l],e[l],r,c))return!1}else{if(h(e,l))return!1;for(var f=Object.keys(t);l<f.length;l++){var d=f[l];if(!h(e,d)||!C(t[d],e[d],r,c))return!1}return f.length===Object.keys(e).length}for(l=0;l<o.length;l++){var p=o[l];if(!C(t[p],e[p],r,c))return!1}return!0}(t,e,r,l,o,c);return o.val1.delete(t),o.val2.delete(e),E}function Z(t,e,r,n){for(var i=s(t),o=0;o<i.length;o++){var a=i[o];if(C(e,a,r,n))return t.delete(a),!0}return!1}function U(t){switch(i(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(l(t))return!1}return!0}function F(t,e,r,n,i,o){for(var a=s(t),c=0;c<a.length;c++){var u=a[c];if(C(r,u,i,o)&&C(n,e.get(u),i,o))return t.delete(u),!0}return!1}t.exports={isDeepEqual:function(t,e){return C(t,e,!1)},isDeepStrictEqual:function(t,e){return C(t,e,!0)}}},56812:function(t){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e){var r=t.exports="u">typeof window&&window.Math==Math?window:"u">typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var r=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch{return!0}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(32)("wks"),i=r(9),o=r(0).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=n},function(t,e,r){var n=r(0),i=r(2),o=r(8),s=r(22),a=r(10),c=function(t,e,r){var u,l,f,h,d=t&c.F,p=t&c.G,m=t&c.S,y=t&c.P,g=t&c.B,b=p?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,v=p?i:i[e]||(i[e]={}),O=v.prototype||(v.prototype={});for(u in p&&(r=e),r)f=((l=!d&&b&&void 0!==b[u])?b:r)[u],h=g&&l?a(f,n):y&&"function"==typeof f?a(Function.call,f):f,b&&s(b,u,f,t&c.U),v[u]!=f&&o(v,u,h),y&&O[u]!=f&&(O[u]=f)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,r){var n=r(16),i=r(21);t.exports=r(3)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(24);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(28),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(","),n=t.name||"",i=t.type||"",o=i.replace(/\/.*$/,"");return r.some(function(t){var e=t.trim();return"."===e.charAt(0)?n.toLowerCase().endsWith(e.toLowerCase()):e.endsWith("/*")?o===e.replace(/\/.*$/,""):i===e})}return!0},r(14),r(34)},function(t,e,r){r(15),t.exports=r(2).Array.some},function(t,e,r){"use strict";var n=r(7),i=r(25)(3);n(n.P+!r(33)([].some,!0)*n.F,"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,r){var n=r(17),i=r(18),o=r(20),s=Object.defineProperty;e.f=r(3)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(1);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){t.exports=!r(3)&&!r(4)(function(){return 7!=Object.defineProperty(r(19)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(1),i=r(0).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(1);t.exports=function(t,e){var r,i;if(!n(t))return t;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t))||"function"==typeof(r=t.valueOf)&&!n(i=r.call(t))||!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(0),i=r(8),o=r(23),s=r(9)("src"),a=Function.toString,c=(""+a).split("toString");r(2).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,r,a){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(u&&(o(r,s)||i(r,s,t[e]?""+t[e]:c.join(String(e)))),t===n?t[e]=r:a?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(10),i=r(26),o=r(27),s=r(12),a=r(29);t.exports=function(t,e){var r=1==t,c=2==t,u=3==t,l=4==t,f=6==t,h=5==t||f,d=e||a;return function(e,a,p){for(var m,y,g=o(e),b=i(g),v=n(a,p,3),O=s(b.length),w=0,E=r?d(e,O):c?d(e,0):void 0;O>w;w++)if((h||w in b)&&(y=v(m=b[w],w,g),t)){if(r)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:E.push(m)}else if(l)return!1}return f?-1:u||l?l:E}}},function(t,e,r){var n=r(5);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(11);t.exports=function(t){return Object(n(t))}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(30);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){var n=r(1),i=r(31),o=r(6)("species");t.exports=function(t){var e;return i(t)&&("function"==typeof(e=t.constructor)&&(e===Array||i(e.prototype))&&(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){var n=r(5);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(0),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,r){"use strict";var n=r(4);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,r){r(35),t.exports=r(2).String.endsWith},function(t,e,r){"use strict";var n=r(7),i=r(12),o=r(36),s="".endsWith;n(n.P+n.F*r(38)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),a=void 0===r?n:Math.min(i(r),n),c=String(t);return s?s.call(e,c,a):e.slice(a-c.length,a)===c}})},function(t,e,r){var n=r(37),i=r(11);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){var n=r(1),i=r(5),o=r(6)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(6)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch{try{return e[n]=!1,!"/./"[t](e)}catch{}}return!0}}])},64145:function(t){function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=1&Math.floor(10*e)?t+r:t-r}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},65390:function(t,e){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return(r+n)*3/4-n},e.toByteArray=function(t){var e,r,o=c(t),s=o[0],a=o[1],u=new i((s+a)*3/4-a),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(t,e,n){for(var i,o=[],s=e;s<n;s+=3)o.push(r[(i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(t,s,s+16383>a?a:s+16383));return 1===i?o.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===i&&o.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),o.join("")};for(var r=[],n=[],i="u">typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},62799:function(t,e,r){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i=typeof globalThis>"u"?r.g:globalThis;t.exports=function(){for(var t=[],e=0;e<n.length;e++)"function"==typeof i[n[e]]&&(t[t.length]=n[e]);return t}},31762:function(t,e,r){"use strict";function n(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.d(e,{Z:function(){return n}})},41627:function(t,e,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}r.d(e,{Z:function(){return n}})},63842:function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r.d(e,{Z:function(){return i}})},55038:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){!function(t,e,r){var i;i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===n(i)?i:String(i))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}r.d(e,{Z:function(){return o}})},64898:function(t,e,r){"use strict";function n(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}r.d(e,{Z:function(){return n}})},41762:function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r.d(e,{Z:function(){return i}})},89867:function(t,e,r){"use strict";function n(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.d(e,{Z:function(){return n}})},4729:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,r){var i;return(i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==n(i)?i:i+"")in t)?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return i}})},21625:function(t,e,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}r.d(e,{Z:function(){return n}})},42625:function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r.d(e,{Z:function(){return i}})},98328:function(t,e,r){"use strict";function n(t,e){if(null==t)return{};var r={};for(var n in t)if(({}).hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}r.d(e,{Z:function(){return n}})},38414:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("u">typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=({}).toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}r.d(e,{Z:function(){return i}})}}]);